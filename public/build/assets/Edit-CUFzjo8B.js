import{b as z,r as b,j as e,a as v}from"./app-GPvwMnjD.js";import{H as q}from"./HostLayout-C3SJWLtj.js";import{T as G}from"./Toast-C34fKQHB.js";import{A as U}from"./ArrowBack-Ci0Euwbk.js";import{C as $}from"./CloudUpload-dl_rVC7v.js";import{D as V}from"./Delete-bSb0e4L0.js";import{T as P,A as H}from"./hostPropertyOptions-BsYRLqhL.js";import{B as C,S as a,a as u,I as J}from"./ArrowDropDown-DnKwYjM7.js";import{C as D,a as E}from"./CardContent-BIrKkGm3.js";import{T as d,B as c}from"./use-language-DFtL6GgK.js";import{R as x,C as m}from"./Row-7DwCY0wW.js";import{T as s,F as g,I as _,S as f}from"./TextField-FgeJYGay.js";import{F as M}from"./FormControlLabel-CM1FT1UK.js";import{C as T}from"./Checkbox-DXUEbrbG.js";/* empty css            */import"./Menu-HEuTxDKX.js";import"./BookOnline-BEEBadv2.js";import"./Hotel-DYRcj2zh.js";import"./Message-laNH6aSc.js";import"./Container-jBV_sa23.js";import"./CheckCircle-B3NCOAWi.js";import"./Close-DxOvZVcn.js";import"./Snackbar-BQ0yGX5e.js";function O(i){if(!i)return"";const h=String(i);return h.length>=5?h.slice(0,5):h}function _e(){const{property:i,propertyTypes:h}=z().props,[W,k]=b.useState(!1),[y,B]=b.useState([]),[t,p]=b.useState({title:i.title,location:i.location,price:i.price.toString(),bedrooms:i.bedrooms.toString(),bathrooms:i.bathrooms.toString(),guests:i.guests.toString(),property_type:i.property_type,status:i.status,description:i.description,airport_pickup_enabled:!!i.airport_pickup_enabled,airport:i.airport??"",pickup_start_time:O(i.pickup_start_time),pickup_end_time:O(i.pickup_end_time),airport_pickup_price:i.airport_pickup_price!=null?String(i.airport_pickup_price):"",guided_tours_enabled:!!i.guided_tours_enabled,guided_tours_description:i.guided_tours_description??"",guided_tours_duration:i.guided_tours_duration??"",guided_tours_price:i.guided_tours_price!=null?String(i.guided_tours_price):""}),F=P.some(r=>r.value===(i.guided_tours_duration??"")),[I,A]=b.useState(!F&&i.guided_tours_duration?String(i.guided_tours_duration):""),l=r=>{const{name:o,value:n}=r.target;p(j=>({...j,[o]:n}))},S=(r,o)=>{p(n=>({...n,[r]:o}))},w=r=>{const o=r.target.files?Array.from(r.target.files):[];o.length&&B(n=>[...n,...o]),r.target.value=""},R=r=>{B(o=>o.filter((n,j)=>j!==r))},L=r=>{r.preventDefault();const o=new FormData;if(o.append("title",t.title),o.append("location",t.location),o.append("price",t.price),o.append("bedrooms",t.bedrooms),o.append("bathrooms",t.bathrooms),o.append("guests",t.guests),o.append("property_type",t.property_type),o.append("status",t.status),o.append("description",t.description),o.append("airport_pickup_enabled",t.airport_pickup_enabled?"1":"0"),t.airport_pickup_enabled&&(o.append("airport",t.airport),o.append("pickup_start_time",t.pickup_start_time),o.append("pickup_end_time",t.pickup_end_time),o.append("airport_pickup_price",t.airport_pickup_price)),o.append("guided_tours_enabled",t.guided_tours_enabled?"1":"0"),t.guided_tours_enabled){o.append("guided_tours_description",t.guided_tours_description);const n=t.guided_tours_duration==="Custom Duration"?I:t.guided_tours_duration;o.append("guided_tours_duration",n),o.append("guided_tours_price",t.guided_tours_price)}o.append("_method","PUT"),y.forEach(n=>o.append("images[]",n)),v.post(`/host/properties/${i.id}`,o,{forceFormData:!0,onSuccess:()=>{k(!0)}})},N=()=>{k(!1)};return e.jsxs(q,{title:"Edit Property",children:[e.jsx(C,{startIcon:e.jsx(U,{}),onClick:()=>v.visit("/host/properties"),sx:{mb:3,color:"#6B7280",textTransform:"none","&:hover":{bgcolor:"#F9FAFB",color:"#111827"}},children:"Back to Properties"}),e.jsx(D,{elevation:0,sx:{border:"1px solid #E5E7EB",borderRadius:"16px"},children:e.jsxs(E,{sx:{p:{xs:2,md:4}},children:[e.jsx(d,{variant:"h5",sx:{fontWeight:700,color:"#111827",mb:4},children:"Edit Property Information"}),e.jsxs("form",{onSubmit:L,children:[e.jsxs(x,{children:[e.jsx(m,{xs:12,md:6,children:e.jsxs(a,{spacing:3,sx:{mb:{xs:3,md:0}},children:[e.jsx(s,{label:"Property Title",name:"title",value:t.title,onChange:l,required:!0,fullWidth:!0,sx:{mb:2}}),e.jsx(s,{label:"Location",name:"location",value:t.location,onChange:l,required:!0,fullWidth:!0,placeholder:"e.g., Malibu, California"}),e.jsx(s,{label:"Price per Night",name:"price",type:"number",value:t.price,onChange:l,required:!0,fullWidth:!0,InputProps:{startAdornment:e.jsx(d,{sx:{marginInlineEnd:1,color:"#6B7280"},children:"$"})}})]})}),e.jsx(m,{xs:12,md:6,children:e.jsxs(a,{spacing:3,children:[e.jsxs(g,{fullWidth:!0,required:!0,children:[e.jsx(_,{children:"Property Type"}),e.jsx(f,{value:t.property_type,onChange:r=>S("property_type",r.target.value),label:"Property Type",children:h.map(r=>e.jsx(u,{value:r,children:r.charAt(0).toUpperCase()+r.slice(1)},r))})]}),e.jsx(s,{label:"Bedrooms",name:"bedrooms",type:"number",value:t.bedrooms,onChange:l,required:!0,fullWidth:!0}),e.jsx(s,{label:"Bathrooms",name:"bathrooms",type:"number",value:t.bathrooms,onChange:l,required:!0,fullWidth:!0}),e.jsx(s,{label:"Guests",name:"guests",type:"number",value:t.guests,onChange:l,required:!0,fullWidth:!0})]})})]}),e.jsx(x,{className:"mt-3",children:e.jsx(m,{xs:12,children:e.jsx(s,{label:"Description",name:"description",value:t.description,onChange:l,required:!0,fullWidth:!0,multiline:!0,rows:6,placeholder:"Describe the property in detail..."})})}),e.jsxs(c,{sx:{mt:4,bgcolor:"#F9FAFB",borderRadius:"12px",p:3},children:[e.jsx(D,{elevation:0,sx:{bgcolor:"#FFFFFF",border:"1px solid #E5E7EB",borderRadius:"12px",mb:3,overflow:"visible"},children:e.jsxs(E,{sx:{p:3},children:[e.jsx(d,{variant:"h6",sx:{fontWeight:600,color:"#111827",mb:2},children:"Airport Pickup Service"}),e.jsx(M,{control:e.jsx(T,{checked:t.airport_pickup_enabled,onChange:r=>p(o=>({...o,airport_pickup_enabled:r.target.checked})),sx:{color:"#AD542D","&.Mui-checked":{color:"#AD542D",bgcolor:"#FFF5F2"}}}),label:e.jsx(d,{sx:{color:"#374151",fontWeight:500},children:"Enable Airport Pickup Service"})}),t.airport_pickup_enabled&&e.jsxs(a,{spacing:2.5,sx:{mt:3,width:"100%"},children:[e.jsxs(g,{fullWidth:!0,size:"medium",required:!0,children:[e.jsx(_,{sx:{color:"#374151"},shrink:!0,children:"Select Airport *"}),e.jsxs(f,{value:t.airport,onChange:r=>p(o=>({...o,airport:r.target.value})),label:"Select Airport *",displayEmpty:!0,renderValue:r=>r||"Select Airport",sx:{bgcolor:"#FFFFFF","& .MuiOutlinedInput-notchedOutline":{borderColor:"#E5E7EB"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#D1D5DB"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#AD542D",borderWidth:1},"& .MuiSelect-select":{py:1.5}},variant:"outlined",children:[e.jsx(u,{value:"",children:"Select Airport"}),H.map(r=>e.jsx(u,{value:r.value,children:r.label},r.value))]})]}),e.jsxs(a,{direction:"row",spacing:2,children:[e.jsx(s,{label:"Pickup Start Time *",name:"pickup_start_time",value:t.pickup_start_time,onChange:l,type:"time",fullWidth:!0,size:"medium",InputLabelProps:{shrink:!0},placeholder:"--:--",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{bgcolor:"#FFFFFF","& fieldset":{borderColor:"#E5E7EB"},"&:hover fieldset":{borderColor:"#D1D5DB"},"&.Mui-focused fieldset":{borderColor:"#AD542D"}},"& .MuiInputLabel-root":{color:"#374151"}}}),e.jsx(s,{label:"Pickup End Time *",name:"pickup_end_time",value:t.pickup_end_time,onChange:l,type:"time",fullWidth:!0,size:"medium",InputLabelProps:{shrink:!0},placeholder:"--:--",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{bgcolor:"#FFFFFF","& fieldset":{borderColor:"#E5E7EB"},"&:hover fieldset":{borderColor:"#D1D5DB"},"&.Mui-focused fieldset":{borderColor:"#AD542D"}},"& .MuiInputLabel-root":{color:"#374151"}}})]}),e.jsx(s,{label:"Airport Pickup Price *",name:"airport_pickup_price",type:"number",value:t.airport_pickup_price,onChange:l,fullWidth:!0,size:"medium",inputProps:{min:0,step:.01},InputProps:{startAdornment:e.jsx(d,{sx:{mr:1,color:"#6B7280"},children:"$"})},placeholder:"Enter price for airport pickup service",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{bgcolor:"#FFFFFF","& fieldset":{borderColor:"#E5E7EB"},"&:hover fieldset":{borderColor:"#D1D5DB"},"&.Mui-focused fieldset":{borderColor:"#AD542D"}},"& .MuiInputLabel-root":{color:"#374151"}}})]})]})}),e.jsx(D,{elevation:0,sx:{bgcolor:"#FFFFFF",border:"1px solid #E5E7EB",borderRadius:"12px",overflow:"visible"},children:e.jsxs(E,{sx:{p:3},children:[e.jsx(d,{variant:"h6",sx:{fontWeight:600,color:"#111827",mb:2},children:"Guided Tours Service"}),e.jsx(M,{control:e.jsx(T,{checked:t.guided_tours_enabled,onChange:r=>p(o=>({...o,guided_tours_enabled:r.target.checked})),sx:{color:"#AD542D","&.Mui-checked":{color:"#AD542D",bgcolor:"#FFF5F2"}}}),label:e.jsx(d,{sx:{color:"#374151",fontWeight:500},children:"Enable Guided Tours Service"})}),t.guided_tours_enabled&&e.jsxs(a,{spacing:2.5,sx:{mt:3,width:"100%"},children:[e.jsx(s,{label:"Tour Description *",name:"guided_tours_description",value:t.guided_tours_description,onChange:l,fullWidth:!0,multiline:!0,rows:3,size:"medium",placeholder:"Describe the tour experience...",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{bgcolor:"#FFFFFF","& fieldset":{borderColor:"#E5E7EB"},"&:hover fieldset":{borderColor:"#D1D5DB"},"&.Mui-focused fieldset":{borderColor:"#AD542D"}},"& .MuiInputLabel-root":{color:"#374151"}}}),e.jsxs(g,{fullWidth:!0,size:"medium",required:!0,children:[e.jsx(_,{sx:{color:"#374151"},shrink:!0,children:"Tour Duration *"}),e.jsxs(f,{value:F?t.guided_tours_duration:"Custom Duration",onChange:r=>{const o=r.target.value;p(n=>({...n,guided_tours_duration:o})),o!=="Custom Duration"&&A("")},label:"Tour Duration *",displayEmpty:!0,renderValue:r=>r||"Select duration",sx:{bgcolor:"#FFFFFF","& .MuiOutlinedInput-notchedOutline":{borderColor:"#E5E7EB"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#D1D5DB"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#AD542D",borderWidth:1},"& .MuiSelect-select":{py:1.5}},variant:"outlined",children:[e.jsx(u,{value:"",children:"Select duration"}),P.map(r=>e.jsx(u,{value:r.value,children:r.label},r.value))]})]}),(t.guided_tours_duration==="Custom Duration"||!F&&t.guided_tours_duration)&&e.jsx(s,{label:"Custom duration (e.g. 2.5 hours)",name:"guided_tours_duration_custom",value:I,onChange:r=>A(r.target.value),fullWidth:!0,size:"medium",placeholder:"Enter custom duration",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{bgcolor:"#FFFFFF","& fieldset":{borderColor:"#E5E7EB"},"&:hover fieldset":{borderColor:"#D1D5DB"},"&.Mui-focused fieldset":{borderColor:"#AD542D"}},"& .MuiInputLabel-root":{color:"#374151"}}}),e.jsx(s,{label:"Guided Tour Price *",name:"guided_tours_price",type:"number",value:t.guided_tours_price,onChange:l,fullWidth:!0,size:"medium",inputProps:{min:0,step:.01},InputProps:{startAdornment:e.jsx(d,{sx:{mr:1,color:"#6B7280"},children:"$"})},placeholder:"Enter price for guided tour service",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{bgcolor:"#FFFFFF","& fieldset":{borderColor:"#E5E7EB"},"&:hover fieldset":{borderColor:"#D1D5DB"},"&.Mui-focused fieldset":{borderColor:"#AD542D"}},"& .MuiInputLabel-root":{color:"#374151"}}})]})]})})]}),e.jsx(x,{className:"mt-4",children:e.jsxs(m,{xs:12,children:[e.jsx(d,{variant:"h6",sx:{fontWeight:700,color:"#111827",mb:2},children:"Property Images"}),e.jsxs(c,{sx:{border:"2px dashed #D1D5DB",borderRadius:"12px",p:2,textAlign:"center",cursor:"pointer",mb:2,"&:hover":{borderColor:"#AD542D",bgcolor:"#FFF7F5"}},onClick:()=>document.getElementById("image-upload-edit")?.click(),children:[e.jsx($,{sx:{fontSize:40,color:"#9CA3AF",mb:1}}),e.jsx(d,{sx:{color:"#374151"},children:"Add more images (PNG, JPG, GIF up to 2MB)"})]}),e.jsx("input",{id:"image-upload-edit",type:"file",accept:"image/*",multiple:!0,onChange:w,style:{display:"none"}}),i.images&&i.images.length>0&&e.jsxs(c,{sx:{mb:2},children:[e.jsx(d,{variant:"body2",sx:{color:"#6B7280",mb:1},children:"Current images"}),e.jsx(a,{direction:"row",flexWrap:"wrap",gap:2,children:i.images.map((r,o)=>e.jsx(c,{component:"img",src:r,alt:`Image ${o+1}`,sx:{width:120,height:90,objectFit:"cover",borderRadius:2,border:"1px solid #E5E7EB"}},o))})]}),e.jsx(a,{direction:"row",flexWrap:"wrap",gap:2,children:y.map((r,o)=>e.jsxs(c,{sx:{position:"relative"},children:[e.jsx(c,{component:"img",src:URL.createObjectURL(r),alt:`New ${o+1}`,sx:{width:120,height:90,objectFit:"cover",borderRadius:2,border:"1px solid #E5E7EB"}}),e.jsx(J,{size:"small",onClick:()=>R(o),sx:{position:"absolute",top:4,right:4,bgcolor:"rgba(0,0,0,0.6)",color:"white","&:hover":{bgcolor:"rgba(0,0,0,0.8)"}},children:e.jsx(V,{fontSize:"small"})})]},o))}),e.jsx(d,{variant:"caption",sx:{color:"#6B7280",mt:1,display:"block"},children:"Add more images below. First image is the main thumbnail."})]})}),e.jsx(x,{className:"mt-4",children:e.jsx(m,{xs:12,children:e.jsxs(g,{fullWidth:!0,children:[e.jsx(_,{children:"Status"}),e.jsxs(f,{value:t.status,onChange:r=>S("status",r.target.value),label:"Status",children:[e.jsx(u,{value:"Pending",children:"Pending"}),e.jsx(u,{value:"Active",children:"Active"}),e.jsx(u,{value:"Inactive",children:"Inactive"})]})]})})}),e.jsx(x,{className:"mt-4",children:e.jsx(m,{xs:12,children:e.jsxs(a,{direction:{xs:"column",sm:"row"},spacing:2,useFlexGap:!0,justifyContent:"flex-end",sx:{width:"100%"},children:[e.jsx(C,{variant:"outlined",onClick:()=>v.visit("/host/properties"),sx:{textTransform:"none",borderColor:"#D1D5DB",color:"#6B7280","&:hover":{borderColor:"#9CA3AF",bgcolor:"#F9FAFB"}},children:"Cancel"}),e.jsx(C,{type:"submit",variant:"contained",sx:{bgcolor:"#AD542D",textTransform:"none",fontWeight:700,"&:hover":{bgcolor:"#78381C"}},children:"Update Property"})]})})})]})]})}),e.jsx(G,{open:W,onClose:N,message:"Property updated successfully!",severity:"success"})]})}export{_e as default};
