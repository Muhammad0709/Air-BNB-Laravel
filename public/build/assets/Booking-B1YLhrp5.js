import{j as e,b as I,r as f,H as q,a as D}from"./app-rC_Untpj.js";import{N as B,F as L}from"./Footer-DG--L2TP.js";import{T as A}from"./Toast-nY178XWj.js";import{c as V,P,S as p,B as F}from"./Stack-CyiA1vL9.js";import{L as R,B as $}from"./BookingSummaryCard-BmrYZ8uw.js";import{u as H}from"./use-language-reb6vBMA.js";import{B as i,T as r}from"./Box-Bt3jkSqy.js";import{C as _}from"./Container-DzzB6KIi.js";import{R as O,C as z}from"./Row-BC5P-dgl.js";import{T as m,F as j,S as v}from"./TextField-DblC5PLy.js";import{M as b}from"./KeyboardArrowDown-8tMyqA0w.js";import{I as Y}from"./InputAdornment-BY20vhDA.js";/* empty css            */import"./Close-CKdSoYIG.js";import"./Snackbar-DsrJFk-X.js";import"./LocationOn-C4ltgbSn.js";import"./Star-yffUuuKr.js";import"./CheckCircle-0Orjg-2m.js";import"./useFormControl-jTL-W0PA.js";const U=V(e.jsx("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"})),G="/images/popular-stay-1.svg";function xe(){const{t:d}=H(),{property:t,nights:y,checkin:h,checkout:u,costs:W,totalAmount:C,rules:E}=I().props,k=(s,n)=>{const o={};t?.id&&(o.property_id=String(t.id)),o.checkin=s,o.checkout=n;const x=`/booking?${new URLSearchParams(o).toString()}`;D.visit(x,{method:"get",preserveState:!0,only:["costs","totalAmount","nights","checkin","checkout"]})},[a,S]=f.useState({name:"",email:"",phone:"",phoneCode:"+31",guests:1,rooms:1,adults:1,children:0,paymentMethod:"ideal",cardNumber:"",expiryDate:"",csv:""});f.useEffect(()=>{t&&S(s=>({...s,rooms:Math.max(1,t.bedrooms||1),guests:Math.max(1,t.guests||1),adults:Math.max(1,t.guests?Math.min(t.guests,10):1),children:0}))},[t]);const[l,w]=f.useState({}),[g,N]=f.useState({open:!1,message:"",severity:"success"}),T=()=>{const s={};return a.name.trim()?a.name.trim().length<2&&(s.name="Name must be at least 2 characters"):s.name="Name is required",a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(s.email="Please enter a valid email"):s.email="Email is required",a.phone.trim()?/^\d{7,15}$/.test(a.phone.replace(/[\s\-\(\)]/g,""))||(s.phone="Please enter a valid phone number"):s.phone="Phone number is required",a.cardNumber.trim()?/^\d{13,19}$/.test(a.cardNumber.replace(/\s|-/g,""))||(s.cardNumber="Please enter a valid card number"):s.cardNumber="Card number is required",a.expiryDate.trim()?/^(0[1-9]|1[0-2])\/\d{2,4}$/.test(a.expiryDate)||(s.expiryDate="Please enter a valid expiry date (MM/YY)"):s.expiryDate="Expiry date is required",a.csv.trim()?/^\d{3,4}$/.test(a.csv)||(s.csv="Please enter a valid CSV/CVC"):s.csv="CVC/CVV is required",w(s),Object.keys(s).length===0},c=(s,n)=>{S({...a,[s]:n}),l[s]&&w({...l,[s]:""})},M=s=>{if(s.preventDefault(),T()){N({open:!0,message:"Booking request submitted successfully!",severity:"success"});let n="/confirmation";if(t){const o=new URLSearchParams({property_id:String(t.id)});h&&o.set("checkin",h),u&&o.set("checkout",u),n=`/confirmation?${o.toString()}`}setTimeout(()=>D.visit(n),1e3)}else N({open:!0,message:"Please fix the errors in the form",severity:"error"})};return e.jsxs(e.Fragment,{children:[e.jsx(q,{title:d("booking.title")}),e.jsxs(i,{children:[e.jsx(B,{}),e.jsx(i,{className:"booking-page",children:e.jsxs(_,{className:"px-0",children:[e.jsx(i,{sx:{mb:2,mt:4},children:e.jsx(r,{variant:"h2",sx:{fontSize:"2.5rem",fontWeight:800,color:"#222222",mb:2},children:d("booking.title")})}),e.jsxs(O,{children:[e.jsx(z,{xs:12,md:7,lg:8,className:"px-0",children:e.jsxs(P,{elevation:0,className:"booking-form",children:[e.jsx(r,{className:"section-title",sx:{fontSize:"1.5rem",fontWeight:700,color:"#222222",mb:2},children:d("booking.guest_details")}),e.jsxs("form",{onSubmit:M,children:[t&&e.jsxs(p,{direction:"row",spacing:1.5,className:"field",sx:{mb:2},children:[e.jsxs(i,{sx:{flex:1},children:[e.jsx(r,{className:"label",children:d("home.checkin")}),e.jsx(m,{size:"small",fullWidth:!0,type:"date",value:h,onChange:s=>{const n=s.target.value;let o=u;if(new Date(n)>=new Date(u)){const x=new Date(n);x.setDate(x.getDate()+1),o=x.toISOString().slice(0,10)}k(n,o)},InputLabelProps:{shrink:!0},inputProps:{min:new Date().toISOString().slice(0,10)}})]}),e.jsxs(i,{sx:{flex:1},children:[e.jsx(r,{className:"label",children:d("home.checkout")}),e.jsx(m,{size:"small",fullWidth:!0,type:"date",value:u,onChange:s=>{const n=s.target.value;new Date(n)<=new Date(h)||k(h,n)},InputLabelProps:{shrink:!0},inputProps:{min:h}})]})]}),t&&e.jsxs(r,{variant:"body2",sx:{color:"#6B7280",mb:2},children:[y," night",y!==1?"s":""," · Price details update when you change dates"]}),e.jsxs(i,{className:"field",children:[e.jsx(r,{className:"label",children:d("booking.name")}),e.jsx(m,{size:"small",fullWidth:!0,value:a.name,onChange:s=>c("name",s.target.value),required:!0,error:!!l.name,helperText:l.name})]}),e.jsxs(i,{className:"field",children:[e.jsx(r,{className:"label",children:"Number of Rooms"}),e.jsx(j,{fullWidth:!0,size:"small",children:e.jsx(v,{value:a.rooms,displayEmpty:!0,onChange:s=>c("rooms",Number(s.target.value)),children:[1,2,3,4,5,6,7,8,9,10].map(s=>e.jsxs(b,{value:s,children:[s," ",s>1?"rooms":"room"]},s))})})]}),e.jsxs(p,{direction:"row",spacing:1.5,className:"field",children:[e.jsxs(i,{sx:{flex:1},children:[e.jsx(r,{className:"label",children:"Adults"}),e.jsx(j,{fullWidth:!0,size:"small",children:e.jsx(v,{value:a.adults,displayEmpty:!0,onChange:s=>c("adults",Number(s.target.value)),children:[1,2,3,4,5,6,7,8,9,10].map(s=>e.jsxs(b,{value:s,children:[s," ",s>1?"adults":"adult"]},s))})})]}),e.jsxs(i,{sx:{flex:1},children:[e.jsx(r,{className:"label",children:"Children"}),e.jsx(j,{fullWidth:!0,size:"small",children:e.jsx(v,{value:a.children,displayEmpty:!0,onChange:s=>c("children",Number(s.target.value)),children:[0,1,2,3,4,5,6,7,8,9,10].map(s=>e.jsxs(b,{value:s,children:[s," ",s===1?"child":"children"]},s))})})]})]}),e.jsxs(i,{className:"field",children:[e.jsx(r,{className:"label",children:"Email"}),e.jsx(m,{size:"small",placeholder:"example@gmail.com",fullWidth:!0,type:"email",value:a.email,onChange:s=>c("email",s.target.value),required:!0,error:!!l.email,helperText:l.email})]}),e.jsxs(i,{className:"field",children:[e.jsx(r,{className:"label",children:"Phone Number"}),e.jsxs(p,{direction:"row",spacing:1.5,children:[e.jsx(j,{size:"small",sx:{minWidth:120},children:e.jsx(v,{value:a.phoneCode,onChange:s=>c("phoneCode",s.target.value),children:["+31","+44","+1","+92"].map(s=>e.jsx(b,{value:s,children:s},s))})}),e.jsx(m,{size:"small",fullWidth:!0,value:a.phone,onChange:s=>c("phone",s.target.value),error:!!l.phone,helperText:l.phone})]}),e.jsx(r,{className:"help",children:"We will only contact you about your booking"})]}),e.jsx(r,{className:"section-title",sx:{fontSize:"1.5rem",fontWeight:700,color:"#222222",mb:2,mt:1.5},children:"Card info"}),e.jsxs(i,{className:"field",children:[e.jsx(r,{className:"label",children:"Card Number"}),e.jsx(m,{size:"small",fullWidth:!0,value:a.cardNumber,onChange:s=>c("cardNumber",s.target.value),InputProps:{startAdornment:e.jsx(Y,{position:"start",children:e.jsx(U,{sx:{color:"#9CA3AF"}})})},error:!!l.cardNumber,helperText:l.cardNumber})]}),e.jsxs(p,{direction:"row",spacing:1.5,className:"field",children:[e.jsxs(i,{sx:{flex:1},children:[e.jsx(r,{className:"label",children:"Expiry Date"}),e.jsx(m,{size:"small",fullWidth:!0,placeholder:"MM/YY",value:a.expiryDate,onChange:s=>c("expiryDate",s.target.value),error:!!l.expiryDate,helperText:l.expiryDate})]}),e.jsxs(i,{sx:{flex:1},children:[e.jsx(r,{className:"label",children:"CSV/CVC"}),e.jsx(m,{size:"small",fullWidth:!0,placeholder:"123",value:a.csv,onChange:s=>c("csv",s.target.value),error:!!l.csv,helperText:l.csv})]})]}),e.jsxs(P,{elevation:0,className:"booking-total",children:[e.jsx(r,{children:"Total"}),e.jsxs(p,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(r,{className:"grand-total",children:C}),e.jsx(F,{type:"submit",variant:"contained",className:"request-btn",children:"Book"})]})]})]})]})}),e.jsxs(z,{xs:12,md:5,lg:4,children:[e.jsx(R,{image:t?.image??G,title:t?.title??"Select a property",location:t?.location??"—",reviews:t?.reviews_count??0,rating:t?.rating??0}),e.jsx($,{rules:E,costs:W,totalAmount:C})]})]})]})}),e.jsx(L,{}),e.jsx(A,{open:g.open,onClose:()=>N({...g,open:!1}),message:g.message,severity:g.severity})]})]})}export{xe as default};
