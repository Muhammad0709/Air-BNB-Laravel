import{b as ee,r as x,j as t,H as te,a as v}from"./app-CbYQo71t.js";import{H as se}from"./HostLayout-oierNcos.js";import{T as oe}from"./Toast-BqFJTLJr.js";import{A as ne}from"./ArrowBack-CdOveRH3.js";import{C as ae,a as re}from"./ChevronRight-Cm_JlUzi.js";import{B as F,S as A,P as ie}from"./Stack-LdH5WcbR.js";import{C as ce,a as le}from"./CardContent-K81sS-Gx.js";import{T as g,B as m}from"./Box-BdvE7Qbg.js";import{R as B,C as j}from"./Row-DSlN4Jgp.js";import{T as b,F as W,I as $,S as P}from"./TextField-D_seOt0t.js";import{M as y}from"./KeyboardArrowDown-ChSg9dst.js";/* empty css            */import"./Logout-iqq2-wth.js";import"./Hotel-CtnD3yrN.js";import"./Message-DZI4ZXMn.js";import"./Container-DTE6jlNf.js";import"./CheckCircle-BEnK8zD1.js";import"./Close-BrN3mR18.js";import"./Snackbar-DResznTF.js";import"./useFormControl-BJCTuFeZ.js";function Ae(){const{id:I}=ee().props||{},[R,z]=x.useState(!1),[D,w]=x.useState(new Date),[i,M]=x.useState(null),[d,k]=x.useState(null),[H,O]=x.useState(0),[h,f]=x.useState({guest:"",guestEmail:"",guestPhone:"",property:"",checkin:"",checkout:"",status:"Pending",amount:""}),N=[{id:1,title:"Luxury Beachfront Villa",location:"Malibu, California"},{id:2,title:"Modern Apartment",location:"Los Angeles, CA"},{id:3,title:"Cozy Studio",location:"San Francisco, CA"}];x.useEffect(()=>{const e={guest:"John Doe",guestEmail:"john.doe@example.com",guestPhone:"+1 (555) 123-4567",property:"Luxury Beachfront Villa",checkin:"2025-01-15",checkout:"2025-01-20",status:"Confirmed",amount:"1495"};f({guest:e.guest,guestEmail:e.guestEmail,guestPhone:e.guestPhone,property:e.property,checkin:e.checkin,checkout:e.checkout,status:e.status,amount:e.amount});const[s,o,r]=e.checkin.split("-").map(Number),c=new Date(s,o-1,r);c.setHours(0,0,0,0);const[l,u,n]=e.checkout.split("-").map(Number),a=new Date(l,u-1,n);a.setHours(0,0,0,0);const S=new Date(c.getTime()),T=new Date(a.getTime());w(new Date(S)),M(new Date(S)),k(new Date(T)),console.log("Setting dates:",{checkin:S.toISOString(),checkout:T.toISOString(),checkinTime:S.getTime(),checkoutTime:T.getTime()})},[I]),x.useEffect(()=>{i&&d&&O(e=>e+1)},[i,d]);const L=()=>{const e=new Date(D);e.setMonth(e.getMonth()-1),w(e)},Y=()=>{const e=new Date(D);e.setMonth(e.getMonth()+1),w(e)},q=e=>{const s=e.getFullYear(),o=e.getMonth(),r=new Date(s,o,1).getDay(),c=new Date(s,o+1,0).getDate(),l=new Date(s,o,0).getDate(),u=[];for(let n=r-1;n>=0;n--){const a=new Date(s,o-1,l-n);a.setHours(0,0,0,0),a.setMinutes(0,0,0),a.setSeconds(0,0),a.setMilliseconds(0),u.push({day:l-n,isOtherMonth:!0,date:new Date(a.getTime())})}for(let n=1;n<=c;n++){const a=new Date(s,o,n);a.setHours(0,0,0,0),a.setMinutes(0,0,0),a.setSeconds(0,0),a.setMilliseconds(0),u.push({day:n,isOtherMonth:!1,date:new Date(a.getTime())})}for(;u.length<42;){const n=u.length-c-r+1,a=new Date(s,o+1,n);a.setHours(0,0,0,0),a.setMinutes(0,0,0),a.setSeconds(0,0),a.setMilliseconds(0),u.push({day:n,isOtherMonth:!0,date:new Date(a.getTime())})}return u},K=e=>e.toLocaleString("default",{month:"short",year:"numeric"}),U=e=>{const s=new Date(e);if(s.setHours(0,0,0,0),!i||i&&d){M(new Date(s)),k(null);const o=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`;f(r=>({...r,checkin:o,checkout:""}))}else if(i&&!d){const o=new Date(i);if(o.setHours(0,0,0,0),s>o){k(new Date(s));const r=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`;f(c=>({...c,checkout:r}))}else if(s<o){M(new Date(s)),k(null);const r=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`;f(c=>({...c,checkin:r,checkout:""}))}}},p=e=>{const s=new Date(e);return s.setHours(0,0,0,0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),s},V=e=>{if(!i||!d)return!1;const s=p(e),o=p(i),r=p(d);return s>=o&&s<=r},G=e=>{if(!i)return!1;const s=p(e),o=p(i);return s.getTime()===o.getTime()},J=e=>{if(!d)return!1;const s=p(e),o=p(d);return s.getTime()===o.getTime()},_=e=>{const s=new Date;s.setHours(0,0,0,0);const o=new Date(e);return o.setHours(0,0,0,0),o<s},Q=q(D),C=e=>{const{name:s,value:o}=e.target;f(r=>({...r,[s]:o}))},E=(e,s)=>{f(o=>({...o,[e]:s}))},X=e=>{e.preventDefault(),console.log("Updated booking data:",h),z(!0),setTimeout(()=>{v.visit("/host/bookings")},1500)},Z=()=>{z(!1)};return t.jsxs(t.Fragment,{children:[t.jsx(te,{title:"Edit Booking"}),t.jsxs(se,{title:"Edit Booking",children:[t.jsx(F,{startIcon:t.jsx(ne,{}),onClick:()=>v.visit("/host/bookings"),sx:{mb:3,color:"#717171",textTransform:"none","&:hover":{bgcolor:"#F9FAFB",color:"#222222"}},children:"Back to Bookings"}),t.jsx(ce,{elevation:0,sx:{border:"1px solid #E5E7EB",borderRadius:2},children:t.jsxs(le,{sx:{p:{xs:2,md:4}},children:[t.jsx(g,{variant:"h5",sx:{fontWeight:700,color:"#222222",mb:4},children:"Edit Booking Information"}),t.jsxs("form",{onSubmit:X,children:[t.jsxs(B,{children:[t.jsx(j,{xs:12,md:6,children:t.jsxs(A,{spacing:3,sx:{mb:{xs:3,md:0}},children:[t.jsx(b,{label:"Guest Name",name:"guest",value:h.guest,onChange:C,required:!0,fullWidth:!0}),t.jsx(b,{label:"Email Address",name:"guestEmail",type:"email",value:h.guestEmail,onChange:C,required:!0,fullWidth:!0}),t.jsx(b,{label:"Phone Number",name:"guestPhone",value:h.guestPhone,onChange:C,required:!0,fullWidth:!0}),t.jsxs(W,{fullWidth:!0,required:!0,children:[t.jsx($,{children:"Property"}),t.jsx(P,{value:h.property,onChange:e=>E("property",e.target.value),label:"Property",children:N.map(e=>t.jsxs(y,{value:e.title,children:[e.title," - ",e.location]},e.id))})]})]})}),t.jsx(j,{xs:12,md:6,children:t.jsxs(A,{spacing:3,children:[t.jsx(b,{label:"Total Amount",name:"amount",type:"number",value:h.amount,onChange:C,required:!0,fullWidth:!0,InputProps:{startAdornment:t.jsx(g,{sx:{mr:1,color:"#717171"},children:"$"})}}),t.jsxs(W,{fullWidth:!0,children:[t.jsx($,{children:"Status"}),t.jsxs(P,{value:h.status,onChange:e=>E("status",e.target.value),label:"Status",children:[t.jsx(y,{value:"Pending",children:"Pending"}),t.jsx(y,{value:"Confirmed",children:"Confirmed"}),t.jsx(y,{value:"Cancelled",children:"Cancelled"})]})]})]})})]}),t.jsx(B,{className:"mt-4",children:t.jsxs(j,{xs:12,children:[t.jsx(g,{variant:"h6",sx:{fontWeight:700,color:"#222222",mb:3},children:"Select Dates"}),t.jsx(m,{sx:{width:"100%",maxWidth:{xs:"100%",lg:"500px"},mx:"auto",px:{xs:0,sm:1}},children:t.jsxs(ie,{elevation:0,sx:{backgroundColor:"#FFFFFF",color:"#1F1F1F",transition:"box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",borderRadius:{xs:"12px",md:"20px"},boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",border:"1px solid #E5E7EB",padding:{xs:"12px",sm:"16px",md:"20px"},width:"100%",maxWidth:"100%",boxSizing:"border-box",overflow:"hidden"},children:[t.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:{xs:2,md:2.5},pb:{xs:1,md:1.5},borderBottom:"2px solid #F3F4F6"},children:[t.jsx(F,{size:"small",onClick:L,sx:{minWidth:{xs:32,md:36},height:{xs:32,md:36},borderRadius:"50%",bgcolor:"#F9FAFB",color:"#717171","&:hover":{bgcolor:"#F3F4F6",color:"#222222"}},children:t.jsx(ae,{sx:{fontSize:{xs:18,md:20}}})}),t.jsx(g,{component:"span",sx:{fontWeight:700,color:"#222222",fontSize:{xs:14,md:16},letterSpacing:.5},children:K(D)}),t.jsx(F,{size:"small",onClick:Y,sx:{minWidth:{xs:32,md:36},height:{xs:32,md:36},borderRadius:"50%",bgcolor:"#F9FAFB",color:"#717171","&:hover":{bgcolor:"#F3F4F6",color:"#222222"}},children:t.jsx(re,{sx:{fontSize:{xs:18,md:20}}})})]}),t.jsx(m,{sx:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:{xs:.25,md:.5},mb:{xs:1,md:1.5},width:"100%"},children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(e=>t.jsx(m,{sx:{textAlign:"center",fontWeight:700,color:"#717171",fontSize:{xs:10,md:11},py:{xs:.75,md:1},textTransform:"uppercase",letterSpacing:.5,minWidth:0},children:e},e))}),t.jsx(m,{sx:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:{xs:.25,md:.5},width:"100%"},children:Q.slice(0,35).map((e,s)=>{const o=!e.isOtherMonth&&i&&d&&V(e.date),r=!e.isOtherMonth&&i&&G(e.date),c=!e.isOtherMonth&&d&&J(e.date),l=r||c,u=!e.isOtherMonth&&_(e.date),n=e.isOtherMonth||u;e.day>=14&&e.day<=20&&!e.isOtherMonth&&console.log(`Date ${e.day}: isStart=${r}, isEnd=${c}, isInRange=${o}, isSelected=${l}, bgcolor will be:`,l?"#AD542D":o?"#FFF5F5":"transparent");const a=`${s}-${e.date.getTime()}-${i?.getTime()||0}-${d?.getTime()||0}`;return t.jsx(m,{onClick:()=>!n&&U(e.date),sx:{aspectRatio:"1",display:"flex",alignItems:"center",justifyContent:"center",cursor:n?"not-allowed":"pointer",color:n?"#D1D5DB":l?"#FFFFFF":"#374151",bgcolor:l?"#AD542D":o?"#FFF5F5":"transparent",backgroundColor:l?"#AD542D":o?"#FFF5F5":"transparent",borderRadius:r?{xs:"4px 0 0 4px",md:"8px 0 0 8px"}:c?{xs:"0 4px 4px 0",md:"0 8px 8px 0"}:o?0:{xs:1,md:2},fontSize:{xs:12,md:13},fontWeight:l?700:500,minHeight:{xs:32,md:36},transition:"all 0.2s ease",position:"relative",opacity:n?.4:1,minWidth:0,width:"100%",maxWidth:"100%","&:hover":{bgcolor:n?"transparent":l?"#78381C":o?"#FFF5F5":"#F3F4F6",transform:n?"none":"scale(1.05)",color:n?"#D1D5DB":l?"#FFFFFF":"#222222",opacity:n?.4:1},"&:active":{transform:n?"none":"scale(0.95)"}},children:e.day},a)})}),t.jsxs(m,{sx:{mt:{xs:2,md:2.5},pt:{xs:1,md:1.5},borderTop:"1px solid #F3F4F6",display:"flex",justifyContent:"space-around",gap:{xs:1,md:2}},children:[t.jsxs(m,{sx:{textAlign:"center"},children:[t.jsx(g,{sx:{fontSize:{xs:11,md:12},color:"#717171",fontWeight:500},children:"Check-in"}),t.jsx(g,{sx:{fontSize:{xs:12,md:13},color:h.checkin?"#222222":"#9CA3AF",fontWeight:600,mt:.5},children:h.checkin||"Not selected"})]}),t.jsxs(m,{sx:{textAlign:"center"},children:[t.jsx(g,{sx:{fontSize:{xs:11,md:12},color:"#717171",fontWeight:500},children:"Check-out"}),t.jsx(g,{sx:{fontSize:{xs:12,md:13},color:h.checkout?"#222222":"#9CA3AF",fontWeight:600,mt:.5},children:h.checkout||"Not selected"})]})]})]},`calendar-${D.getTime()}-${i?.getTime()||0}-${d?.getTime()||0}-${H}`)})]})}),t.jsx(B,{className:"mt-4",children:t.jsx(j,{xs:12,children:t.jsxs(A,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"flex-end",sx:{width:"100%"},children:[t.jsx(F,{variant:"outlined",onClick:()=>v.visit("/host/bookings"),sx:{textTransform:"none",borderColor:"#D1D5DB",color:"#717171","&:hover":{borderColor:"#9CA3AF",bgcolor:"#F9FAFB"}},children:"Cancel"}),t.jsx(F,{type:"submit",variant:"contained",sx:{bgcolor:"#AD542D",textTransform:"none",fontWeight:700,"&:hover":{bgcolor:"#78381C"}},children:"Update Booking"})]})})})]})]})}),t.jsx(oe,{open:R,onClose:Z,message:"Booking updated successfully!",severity:"success"})]})]})}export{Ae as default};
