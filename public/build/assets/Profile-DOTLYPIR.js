import{b as q,r as m,j as e,H as z,a as x}from"./app-BG98yZsH.js";import{A as K}from"./AdminLayout-B81dRbJc.js";import{T as L}from"./Toast-fsF9Hn65.js";import{S as A}from"./Save-wjo27r3Y.js";import{P as k}from"./PhotoCamera-F2svPE3v.js";import{u as H,B as n,T as a}from"./use-language-B6mIZlp-.js";import{R as G,C as T}from"./Row-BHyYBfoC.js";import{C as v,a as y}from"./CardContent-xp3PdCZs.js";import{S as h,B as g}from"./ArrowDropDown-E0EBazOW.js";import{A as U}from"./KeyboardArrowDown-DmWJJfVK.js";import{T as u}from"./TextField-Cmce5bio.js";/* empty css            */import"./Logout-DyL8LRXk.js";import"./People-Ds-ciQdG.js";import"./Hotel-55yaoNQu.js";import"./Container-C4NMCT8v.js";import"./CheckCircle-DDiLwL1d.js";import"./Close--4yLerG8.js";import"./Snackbar-Bi4Ay5mI.js";import"./useFormControl-jVel-GGt.js";function pe(){const{t:s}=H(),{url:C,props:o}=q(),i=o.user,[j,f]=m.useState({open:!1,message:"",severity:"success"}),[l,D]=m.useState({name:i?.name??"",email:i?.email??"",profileImage:i?.profile_picture??null}),[d,P]=m.useState({currentPassword:"",newPassword:"",confirmPassword:""});m.useEffect(()=>{i&&D({name:i.name??"",email:i.email??"",profileImage:i.profile_picture??null})},[i?.id,i?.name,i?.email,i?.profile_picture]),m.useEffect(()=>{o.flash?.success&&f({open:!0,message:o.flash.success,severity:"success"}),o.flash?.error&&f({open:!0,message:o.flash.error,severity:"error"})},[o.flash?.success,o.flash?.error]);const _=r=>{const{name:t,value:p}=r.target;D(b=>({...b,[t]:p}))},w=r=>{const{name:t,value:p}=r.target;P(b=>({...b,[t]:p}))},F=r=>{const t=r.target.files?.[0];if(!t)return;if(t.size>2*1024*1024){f({open:!0,message:s("admin.settings.image_size_error"),severity:"error"}),r.target.value="";return}const p=new FormData;p.append("profile_picture",t),x.post("/admin/settings/picture",p,{preserveScroll:!0}),r.target.value=""},E=r=>{r.preventDefault(),x.put("/admin/settings/profile",{name:l.name,email:l.email},{preserveScroll:!0})},I=r=>{r.preventDefault(),x.put("/admin/settings/password",{current_password:d.currentPassword,new_password:d.newPassword,new_password_confirmation:d.confirmPassword},{preserveScroll:!0,onSuccess:()=>P({currentPassword:"",newPassword:"",confirmPassword:""})})},R=r=>(r||"").split(" ").map(t=>t[0]).join("").slice(0,2),S=l.profileImage||i?.profile_picture||null,B=[{id:"profile",labelKey:"admin.settings.profile",path:"/admin/settings/profile"},{id:"password",labelKey:"admin.settings.password",path:"/admin/settings/password"}],c=C.includes("profile")?"profile":C.includes("password")?"password":"profile",W=()=>s(c==="profile"?"admin.settings.profile_settings":c==="password"?"admin.settings.password_settings":"admin.settings.title");return e.jsxs(e.Fragment,{children:[e.jsx(z,{title:W()}),e.jsxs(K,{title:W(),children:[e.jsxs(n,{sx:{mb:4},children:[e.jsx(a,{variant:"h4",sx:{fontWeight:700,color:"#222222",mb:1},children:s("admin.settings.title")}),e.jsx(a,{variant:"body1",sx:{color:"#717171"},children:s("admin.settings.settings_subtitle")})]}),e.jsxs(G,{children:[e.jsx(T,{xs:12,md:3,children:e.jsx(v,{elevation:0,sx:{border:"1px solid #E5E7EB",borderRadius:2,mb:3},children:e.jsx(y,{sx:{p:0},children:e.jsx(h,{spacing:0,children:B.map(r=>{const t=c===r.id;return e.jsx(g,{fullWidth:!0,onClick:()=>x.visit(r.path),sx:{justifyContent:"flex-start",px:3,py:2,textTransform:"none",color:t?"#AD542D":"#717171",fontWeight:t?700:500,bgcolor:t?"#FFF5F7":"transparent",borderRadius:0,borderLeft:t?"3px solid #AD542D":"3px solid transparent","&:hover":{bgcolor:t?"#FFF5F7":"#F9FAFB"}},children:s(r.labelKey)},r.id)})})})})}),e.jsxs(T,{xs:12,md:9,children:[c==="profile"&&e.jsx(v,{elevation:0,sx:{border:"1px solid #E5E7EB",borderRadius:"20px",width:"100%",maxWidth:"800px"},children:e.jsxs(y,{sx:{p:4},children:[e.jsx(a,{variant:"h6",sx:{fontWeight:700,color:"#222222",mb:1},children:s("admin.settings.profile")}),e.jsx(a,{variant:"body2",sx:{color:"#717171",mb:4},children:s("admin.settings.profile_subtitle")}),e.jsx("form",{onSubmit:E,children:e.jsxs(h,{spacing:4,children:[e.jsx(n,{children:e.jsxs(h,{direction:"row",spacing:3,useFlexGap:!0,alignItems:"center",children:[e.jsxs(n,{sx:{position:"relative"},children:[e.jsx(U,{src:S||void 0,sx:{width:100,height:100,bgcolor:"#AD542D",fontSize:"2rem",fontWeight:700},children:!S&&R(l.name)}),e.jsx(n,{sx:{position:"absolute",bottom:0,right:0,bgcolor:"#AD542D",borderRadius:"50%",p:.5,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(k,{sx:{fontSize:16,color:"#FFFFFF"}})}),e.jsx("input",{type:"file",accept:"image/*",onChange:F,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer"}})]}),e.jsxs(n,{children:[e.jsxs(g,{variant:"outlined",component:"label",sx:{borderColor:"#D0D5DD",color:"#344054",textTransform:"none",borderRadius:2,"&:hover":{borderColor:"#D0D5DD",bgcolor:"#F9FAFB"}},children:[s("admin.settings.upload_picture"),e.jsx("input",{type:"file",accept:"image/*",onChange:F,hidden:!0})]}),e.jsx(a,{variant:"body2",sx:{color:"#717171",mt:1},children:s("admin.settings.image_formats_note")})]})]})}),e.jsx(u,{label:s("admin.settings.name"),name:"name",value:l.name,onChange:_,fullWidth:!0,required:!0}),e.jsx(u,{label:s("admin.settings.email_address"),name:"email",type:"email",value:l.email,onChange:_,fullWidth:!0,required:!0}),e.jsx(n,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(g,{type:"submit",variant:"contained",startIcon:e.jsx(A,{}),sx:{bgcolor:"#AD542D",textTransform:"none",borderRadius:2,fontWeight:700,px:4,py:1.5,"&:hover":{bgcolor:"#78381C"}},children:s("admin.common.save")})})]})})]})}),c==="password"&&e.jsx(v,{elevation:0,sx:{border:"1px solid #E5E7EB",borderRadius:"20px",width:"100%",maxWidth:"800px"},children:e.jsxs(y,{sx:{p:4},children:[e.jsx(a,{variant:"h6",sx:{fontWeight:700,color:"#222222",mb:1},children:s("admin.settings.update_password")}),e.jsx(a,{variant:"body2",sx:{color:"#717171",mb:4},children:s("admin.settings.password_description")}),e.jsx("form",{onSubmit:I,children:e.jsxs(h,{spacing:3,children:[e.jsx(u,{label:s("admin.settings.current_password"),name:"currentPassword",type:"password",value:d.currentPassword,onChange:w,fullWidth:!0,required:!0}),e.jsx(u,{label:s("admin.settings.new_password"),name:"newPassword",type:"password",value:d.newPassword,onChange:w,fullWidth:!0,required:!0}),e.jsx(u,{label:s("admin.settings.confirm_password"),name:"confirmPassword",type:"password",value:d.confirmPassword,onChange:w,fullWidth:!0,required:!0}),e.jsx(n,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(g,{type:"submit",variant:"contained",startIcon:e.jsx(A,{}),sx:{bgcolor:"#AD542D",textTransform:"none",borderRadius:2,fontWeight:700,px:4,py:1.5,"&:hover":{bgcolor:"#78381C"}},children:s("admin.settings.save_password")})})]})})]})})]})]}),e.jsx(L,{open:j.open,onClose:()=>f(r=>({...r,open:!1})),message:j.message,severity:j.severity})]})]})}export{pe as default};
