import{b as U,r as c,j as e,H as q,a as x}from"./app-CPhjOSke.js";import{H as O}from"./HostLayout-BrlAgcmI.js";import{T as G}from"./Toast-BjSZCi9i.js";import{S as N}from"./Save-CiprhRXP.js";import{P as L}from"./PhotoCamera-Cd7Ffv1-.js";import{B as n,T as l}from"./use-language-D5XVFEOG.js";import{R as $,C as W}from"./Row-CVwydcwq.js";import{C as y,a as P}from"./CardContent-DLZhe9Fw.js";import{S as p,B as h}from"./ArrowDropDown-OIPkS8Zr.js";import{A as z}from"./KeyboardArrowDown-CknWUv0w.js";import{T as u}from"./TextField-BVuZFE9q.js";/* empty css            */import"./Logout-DKcA8_Z6.js";import"./Hotel-4cTj72Ro.js";import"./Message-BQYo7CeW.js";import"./Container-B_hkrPt9.js";import"./CheckCircle-CWrkMuRO.js";import"./Close-C7uomlFv.js";import"./Snackbar-C4oWZnaa.js";import"./useFormControl-CsrugXC6.js";function E(g){const o=(g||"").trim().split(/\s+/);return{first:o[0]||"",last:o.slice(1).join(" ")||""}}function pe(){const{url:g,props:o}=U(),t=o.user,[b,m]=c.useState({open:!1,message:"",severity:"success"}),{first:R,last:T}=E(t?.name??""),[a,F]=c.useState({firstName:R||"Host",lastName:T||"User",email:t?.email??"",profileImage:t?.profile_picture??null}),[d,C]=c.useState({currentPassword:"",newPassword:"",confirmPassword:""});c.useEffect(()=>{if(t){const{first:s,last:r}=E(t.name??"");F(i=>({...i,firstName:s||i.firstName,lastName:r||i.lastName,email:t.email??"",profileImage:t.profile_picture??null}))}},[t?.id,t?.name,t?.email,t?.profile_picture]),c.useEffect(()=>{o.flash?.success&&m({open:!0,message:o.flash.success,severity:"success"}),o.flash?.error&&m({open:!0,message:o.flash.error,severity:"error"})},[o.flash?.success,o.flash?.error]);const j=s=>{const{name:r,value:i}=s.target;F(v=>({...v,[r]:i}))},w=s=>{const{name:r,value:i}=s.target;C(v=>({...v,[r]:i}))},A=s=>{const r=s.target.files?.[0];if(!r)return;if(r.size>2*1024*1024){m({open:!0,message:"Image must be 2MB or less.",severity:"error"}),s.target.value="";return}const i=new FormData;i.append("profile_picture",r),x.post("/host/settings/picture",i,{preserveScroll:!0}),s.target.value=""},B=s=>{s.preventDefault(),x.put("/host/settings/profile",{name:`${a.firstName} ${a.lastName}`.trim(),email:a.email,phone:a.phone||null},{preserveScroll:!0})},_=s=>{s.preventDefault(),x.put("/host/settings/password",{current_password:d.currentPassword,new_password:d.newPassword,new_password_confirmation:d.confirmPassword},{preserveScroll:!0,onSuccess:()=>C({currentPassword:"",newPassword:"",confirmPassword:""})})},M=(s,r)=>`${(s||"").charAt(0)}${(r||"").charAt(0)}`.toUpperCase()||"HU",D=a.profileImage||t?.profile_picture||null,S=[{id:"profile",label:"Profile",path:"/host/settings/profile"},{id:"password",label:"Password",path:"/host/settings/password"}],H=g,f=S.find(s=>H.includes(s.id))?.id||"profile",I=()=>{switch(f){case"profile":return"Profile settings";case"password":return"Password settings";default:return"Settings"}};return e.jsxs(e.Fragment,{children:[e.jsx(q,{title:I()}),e.jsxs(O,{title:I(),children:[e.jsxs(n,{sx:{mb:4},children:[e.jsx(l,{variant:"h4",sx:{fontWeight:700,color:"#222222",mb:1},children:"Settings"}),e.jsx(l,{variant:"body1",sx:{color:"#717171"},children:"Manage your profile and account settings"})]}),e.jsxs($,{children:[e.jsx(W,{xs:12,md:3,children:e.jsx(y,{elevation:0,sx:{border:"1px solid #E5E7EB",borderRadius:2,mb:3},children:e.jsx(P,{sx:{p:0},children:e.jsx(p,{spacing:0,children:S.map(s=>{const r=f===s.id;return e.jsx(h,{fullWidth:!0,onClick:()=>x.visit(s.path),sx:{justifyContent:"flex-start",px:3,py:2,textTransform:"none",color:r?"#AD542D":"#717171",fontWeight:r?700:500,bgcolor:r?"#FFF5F5":"transparent",borderRadius:0,borderLeft:r?"3px solid #AD542D":"3px solid transparent","&:hover":{bgcolor:r?"#FFF5F5":"#F9FAFB"}},children:s.label},s.id)})})})})}),e.jsxs(W,{xs:12,md:9,children:[f==="profile"&&e.jsx(y,{elevation:0,sx:{border:"1px solid #E5E7EB",borderRadius:"20px",width:"100%",maxWidth:"800px"},children:e.jsxs(P,{sx:{p:4},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:700,color:"#222222",mb:1},children:"Profile"}),e.jsx(l,{variant:"body2",sx:{color:"#717171",mb:4},children:"Update your profile details"}),e.jsx("form",{onSubmit:B,children:e.jsxs(p,{spacing:4,children:[e.jsx(n,{children:e.jsxs(p,{direction:"row",spacing:3,useFlexGap:!0,alignItems:"center",children:[e.jsxs(n,{sx:{position:"relative"},children:[e.jsx(z,{src:D||void 0,sx:{width:100,height:100,bgcolor:"#AD542D",fontSize:"2rem",fontWeight:700},children:!D&&M(a.firstName,a.lastName)}),e.jsxs(n,{sx:{position:"absolute",bottom:0,right:0,bgcolor:"#AD542D",borderRadius:"50%",p:1,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:[e.jsx("input",{type:"file",accept:"image/*",hidden:!0,id:"profile-image-upload",onChange:A}),e.jsx("label",{htmlFor:"profile-image-upload",children:e.jsx(L,{sx:{fontSize:20,color:"#FFFFFF"}})})]})]}),e.jsxs(n,{children:[e.jsx(h,{variant:"outlined",component:"label",htmlFor:"profile-image-upload",sx:{borderColor:"#D0D5DD",color:"#344054",textTransform:"none",borderRadius:2,py:1,px:2,"&:hover":{borderColor:"#D0D5DD",bgcolor:"#F9FAFB"}},children:"Upload picture"}),e.jsx(l,{variant:"body2",sx:{color:"#717171",mt:1},children:"JPG, PNG or GIF. 2MB max."})]})]})}),e.jsxs(p,{direction:"row",spacing:2,useFlexGap:!0,children:[e.jsx(u,{fullWidth:!0,label:"First Name",name:"firstName",value:a.firstName,onChange:j,required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(u,{fullWidth:!0,label:"Last Name",name:"lastName",value:a.lastName,onChange:j,required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]}),e.jsx(u,{fullWidth:!0,label:"Email address",name:"email",type:"email",value:a.email,onChange:j,required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(n,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(h,{type:"submit",variant:"contained",startIcon:e.jsx(N,{}),sx:{bgcolor:"#AD542D",textTransform:"none",fontWeight:700,py:1,"&:hover":{bgcolor:"#78381C"}},children:"Save"})})]})})]})}),f==="password"&&e.jsx(y,{elevation:0,sx:{border:"1px solid #E5E7EB",borderRadius:"20px",width:"100%",maxWidth:"800px"},children:e.jsxs(P,{sx:{p:4},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:700,color:"#222222",mb:1},children:"Update password"}),e.jsx(l,{variant:"body2",sx:{color:"#717171",mb:4},children:"Ensure your account is using a long, random password to stay secure"}),e.jsx("form",{onSubmit:_,children:e.jsxs(p,{spacing:3,children:[e.jsx(u,{fullWidth:!0,label:"Current password",type:"password",name:"currentPassword",value:d.currentPassword,onChange:w,required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(u,{fullWidth:!0,label:"New password",type:"password",name:"newPassword",value:d.newPassword,onChange:w,required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(u,{fullWidth:!0,label:"Confirm password",type:"password",name:"confirmPassword",value:d.confirmPassword,onChange:w,required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(n,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(h,{type:"submit",variant:"contained",startIcon:e.jsx(N,{}),sx:{bgcolor:"#AD542D",textTransform:"none",fontWeight:700,py:1,"&:hover":{bgcolor:"#78381C"}},children:"Save password"})})]})})]})})]})]}),e.jsx(G,{open:b.open,onClose:()=>m(s=>({...s,open:!1})),message:b.message,severity:b.severity})]})]})}export{pe as default};
