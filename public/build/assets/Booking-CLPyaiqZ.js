import{j as e,b as E,r as b,H as L,a as D}from"./app-D8edOWXn.js";import{N as q,F as M}from"./Footer-BnJykdy7.js";import{T as A}from"./Toast-C9zN_MMA.js";import{c as B,P as w,S as g,B as F}from"./Stack-26joxvls.js";import{L as $,B as H}from"./BookingSummaryCard-C8RhtNuL.js";import{u as R}from"./use-language-DtKZJM4y.js";import{B as n,T as a}from"./Box-C2PF00jf.js";import{C as O}from"./Container-B9bZszYJ.js";import{R as U,C as z}from"./Row-V3psX_1Y.js";import{T as d,F as f,S as j}from"./TextField-D8p6qWxF.js";import{M as v}from"./KeyboardArrowDown-s2i05HpT.js";import{I as V}from"./InputAdornment-Ckh5xgwH.js";/* empty css            */import"./Close-ZvlGfhoA.js";import"./Snackbar-DNgACC_y.js";import"./LocationOn-CMKNkNSq.js";import"./Star-DC9s_UBy.js";import"./CheckCircle-B5CoXN5y.js";import"./useFormControl-B4piLBUM.js";const G=B(e.jsx("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"})),J="/images/popular-stay-1.svg";function pe(){const{t:r}=R(),{property:i,nights:k,checkin:h,checkout:u,costs:W,totalAmount:N,rules:T}=E().props,y=(s,l)=>{const c={};i?.id&&(c.property_id=String(i.id)),c.checkin=s,c.checkout=l;const p=`/booking?${new URLSearchParams(c).toString()}`;D.visit(p,{method:"get",preserveState:!0,only:["costs","totalAmount","nights","checkin","checkout"]})},[t,C]=b.useState({name:"",email:"",phone:"",phoneCode:"+31",guests:1,rooms:1,adults:1,children:0,paymentMethod:"ideal",cardNumber:"",expiryDate:"",csv:""});b.useEffect(()=>{i&&C(s=>({...s,rooms:Math.max(1,i.bedrooms||1),guests:Math.max(1,i.guests||1),adults:Math.max(1,i.guests?Math.min(i.guests,10):1),children:0}))},[i]);const[o,S]=b.useState({}),[x,_]=b.useState({open:!1,message:"",severity:"success"}),I=()=>{const s={};return t.name.trim()?t.name.trim().length<2&&(s.name=r("booking.err_name_min")):s.name=r("booking.err_name_required"),t.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(s.email=r("booking.err_email_invalid")):s.email=r("booking.err_email_required"),t.phone.trim()?/^\d{7,15}$/.test(t.phone.replace(/[\s\-\(\)]/g,""))||(s.phone=r("booking.err_phone_invalid")):s.phone=r("booking.err_phone_required"),t.cardNumber.trim()?/^\d{13,19}$/.test(t.cardNumber.replace(/\s|-/g,""))||(s.cardNumber=r("booking.err_card_invalid")):s.cardNumber=r("booking.err_card_required"),t.expiryDate.trim()?/^(0[1-9]|1[0-2])\/\d{2,4}$/.test(t.expiryDate)||(s.expiryDate=r("booking.err_expiry_invalid")):s.expiryDate=r("booking.err_expiry_required"),t.csv.trim()?/^\d{3,4}$/.test(t.csv)||(s.csv=r("booking.err_csv_invalid")):s.csv=r("booking.err_csv_required"),S(s),Object.keys(s).length===0},m=(s,l)=>{C({...t,[s]:l}),o[s]&&S({...o,[s]:""})},P=s=>{if(s.preventDefault(),I()){_({open:!0,message:r("booking.toast_success"),severity:"success"});let l="/confirmation";if(i){const c=new URLSearchParams({property_id:String(i.id)});h&&c.set("checkin",h),u&&c.set("checkout",u),l=`/confirmation?${c.toString()}`}setTimeout(()=>D.visit(l),1e3)}else _({open:!0,message:r("booking.toast_fix_errors"),severity:"error"})};return e.jsxs(e.Fragment,{children:[e.jsx(L,{title:r("booking.title")}),e.jsxs(n,{children:[e.jsx(q,{}),e.jsx(n,{className:"booking-page",children:e.jsxs(O,{className:"px-0",children:[e.jsx(n,{sx:{mb:2,mt:4},children:e.jsx(a,{variant:"h2",sx:{fontSize:"2.5rem",fontWeight:800,color:"#222222",mb:2},children:r("booking.title")})}),e.jsxs(U,{children:[e.jsx(z,{xs:12,md:7,lg:8,className:"px-0",children:e.jsxs(w,{elevation:0,className:"booking-form",children:[e.jsx(a,{className:"section-title",sx:{fontSize:"1.5rem",fontWeight:700,color:"#222222",mb:2},children:r("booking.guest_details")}),e.jsxs("form",{onSubmit:P,children:[i&&e.jsxs(g,{direction:"row",spacing:1.5,className:"field",sx:{mb:2},children:[e.jsxs(n,{sx:{flex:1},children:[e.jsx(a,{className:"label",children:r("home.checkin")}),e.jsx(d,{size:"small",fullWidth:!0,type:"date",value:h,onChange:s=>{const l=s.target.value;let c=u;if(new Date(l)>=new Date(u)){const p=new Date(l);p.setDate(p.getDate()+1),c=p.toISOString().slice(0,10)}y(l,c)},InputLabelProps:{shrink:!0},inputProps:{min:new Date().toISOString().slice(0,10)}})]}),e.jsxs(n,{sx:{flex:1},children:[e.jsx(a,{className:"label",children:r("home.checkout")}),e.jsx(d,{size:"small",fullWidth:!0,type:"date",value:u,onChange:s=>{const l=s.target.value;new Date(l)<=new Date(h)||y(h,l)},InputLabelProps:{shrink:!0},inputProps:{min:h}})]})]}),i&&e.jsx(a,{variant:"body2",sx:{color:"#6B7280",mb:2},children:k!==1?r("booking.nights_note_plural").replace(":count",String(k)):r("booking.nights_note").replace(":count",String(k))}),e.jsxs(n,{className:"field",children:[e.jsx(a,{className:"label",children:r("booking.name")}),e.jsx(d,{size:"small",fullWidth:!0,value:t.name,onChange:s=>m("name",s.target.value),required:!0,error:!!o.name,helperText:o.name})]}),e.jsxs(n,{className:"field",children:[e.jsx(a,{className:"label",children:r("booking.number_of_rooms")}),e.jsx(f,{fullWidth:!0,size:"small",children:e.jsx(j,{value:t.rooms,displayEmpty:!0,onChange:s=>m("rooms",Number(s.target.value)),children:[1,2,3,4,5,6,7,8,9,10].map(s=>e.jsxs(v,{value:s,children:[s," ",s>1?r("booking.rooms"):r("booking.room")]},s))})})]}),e.jsxs(g,{direction:"row",spacing:1.5,className:"field",children:[e.jsxs(n,{sx:{flex:1},children:[e.jsx(a,{className:"label",children:r("booking.adults")}),e.jsx(f,{fullWidth:!0,size:"small",children:e.jsx(j,{value:t.adults,displayEmpty:!0,onChange:s=>m("adults",Number(s.target.value)),children:[1,2,3,4,5,6,7,8,9,10].map(s=>e.jsxs(v,{value:s,children:[s," ",s>1?r("booking.adults"):r("booking.adult")]},s))})})]}),e.jsxs(n,{sx:{flex:1},children:[e.jsx(a,{className:"label",children:r("booking.children")}),e.jsx(f,{fullWidth:!0,size:"small",children:e.jsx(j,{value:t.children,displayEmpty:!0,onChange:s=>m("children",Number(s.target.value)),children:[0,1,2,3,4,5,6,7,8,9,10].map(s=>e.jsxs(v,{value:s,children:[s," ",r(s===1?"booking.child":"booking.children")]},s))})})]})]}),e.jsxs(n,{className:"field",children:[e.jsx(a,{className:"label",children:r("booking.email")}),e.jsx(d,{size:"small",placeholder:r("booking.email_placeholder"),fullWidth:!0,type:"email",value:t.email,onChange:s=>m("email",s.target.value),required:!0,error:!!o.email,helperText:o.email})]}),e.jsxs(n,{className:"field",children:[e.jsx(a,{className:"label",children:r("booking.phone_number")}),e.jsxs(g,{direction:"row",spacing:1.5,children:[e.jsx(f,{size:"small",sx:{minWidth:120},children:e.jsx(j,{value:t.phoneCode,onChange:s=>m("phoneCode",s.target.value),children:["+31","+44","+1","+92"].map(s=>e.jsx(v,{value:s,children:s},s))})}),e.jsx(d,{size:"small",fullWidth:!0,value:t.phone,onChange:s=>m("phone",s.target.value),error:!!o.phone,helperText:o.phone})]}),e.jsx(a,{className:"help",children:r("booking.phone_note")})]}),e.jsx(a,{className:"section-title",sx:{fontSize:"1.5rem",fontWeight:700,color:"#222222",mb:2,mt:1.5},children:r("booking.card_info")}),e.jsxs(n,{className:"field",children:[e.jsx(a,{className:"label",children:r("booking.card_number")}),e.jsx(d,{size:"small",fullWidth:!0,value:t.cardNumber,onChange:s=>m("cardNumber",s.target.value),InputProps:{startAdornment:e.jsx(V,{position:"start",children:e.jsx(G,{sx:{color:"#9CA3AF"}})})},error:!!o.cardNumber,helperText:o.cardNumber})]}),e.jsxs(g,{direction:"row",spacing:1.5,className:"field",children:[e.jsxs(n,{sx:{flex:1},children:[e.jsx(a,{className:"label",children:r("booking.expiry_date")}),e.jsx(d,{size:"small",fullWidth:!0,placeholder:r("booking.expiry_placeholder"),value:t.expiryDate,onChange:s=>m("expiryDate",s.target.value),error:!!o.expiryDate,helperText:o.expiryDate})]}),e.jsxs(n,{sx:{flex:1},children:[e.jsx(a,{className:"label",children:r("booking.csv")}),e.jsx(d,{size:"small",fullWidth:!0,placeholder:r("booking.csv_placeholder"),value:t.csv,onChange:s=>m("csv",s.target.value),error:!!o.csv,helperText:o.csv})]})]}),e.jsxs(w,{elevation:0,className:"booking-total",children:[e.jsx(a,{children:r("booking.total")}),e.jsxs(g,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(a,{className:"grand-total",children:N}),e.jsx(F,{type:"submit",variant:"contained",className:"request-btn",children:r("booking.book_btn")})]})]})]})]})}),e.jsxs(z,{xs:12,md:5,lg:4,children:[e.jsx($,{image:i?.image??J,title:i?.title??r("booking.select_property"),location:i?.location??"â€”",reviews:i?.reviews_count??0,rating:i?.rating??0}),e.jsx(H,{rules:T,costs:W,totalAmount:N})]})]})]})}),e.jsx(M,{}),e.jsx(A,{open:x.open,onClose:()=>_({...x,open:!1}),message:x.message,severity:x.severity})]})]})}export{pe as default};
