import{b as T,r as x,j as e,a as g}from"./app-k1GojqXu.js";import{H as W}from"./HostLayout-2SJjhaLX.js";import{T as k}from"./Toast-Ba1L8pdR.js";import{A as N}from"./ArrowBack-C2OU1Joi.js";import{C as R}from"./CloudUpload-Jsl37J9C.js";import{D as q}from"./Delete-C7lXEvZw.js";import{B as b,S as p}from"./Stack-CYseCBxy.js";import{C as _,a as U}from"./CardContent-DBiktHXJ.js";import{T as l,B as d}from"./Box-D4yAPD6z.js";import{R as m,C as c}from"./Row-BGspGPYI.js";import{T as n,F,I as B,S as D}from"./TextField-CFKFQx2k.js";import{M as u,I as L}from"./KeyboardArrowDown-CQnTADGU.js";/* empty css            */import"./Logout-D6ncuuCu.js";import"./Hotel-w8LsJmGb.js";import"./Message-aHG1EXTA.js";import"./Container-DsV2d6KA.js";import"./CheckCircle-BNaB4qOb.js";import"./Close-Ba8cFB5d.js";import"./Snackbar-DNMqrWeB.js";import"./useFormControl-CHHJCYs2.js";function le(){const{property:s,propertyTypes:A}=T().props,[S,j]=x.useState(!1),[f,y]=x.useState([]),[o,v]=x.useState({title:s.title,location:s.location,price:s.price.toString(),bedrooms:s.bedrooms.toString(),bathrooms:s.bathrooms.toString(),guests:s.guests.toString(),property_type:s.property_type,status:s.status,description:s.description}),a=r=>{const{name:t,value:i}=r.target;v(h=>({...h,[t]:i}))},C=(r,t)=>{v(i=>({...i,[r]:t}))},w=r=>{const t=r.target.files?Array.from(r.target.files):[];t.length&&y(i=>[...i,...t]),r.target.value=""},I=r=>{y(t=>t.filter((i,h)=>h!==r))},P=r=>{r.preventDefault();const t=new FormData;t.append("title",o.title),t.append("location",o.location),t.append("price",o.price),t.append("bedrooms",o.bedrooms),t.append("bathrooms",o.bathrooms),t.append("guests",o.guests),t.append("property_type",o.property_type),t.append("status",o.status),t.append("description",o.description),t.append("_method","PUT"),f.forEach(i=>t.append("images[]",i)),g.post(`/host/properties/${s.id}`,t,{forceFormData:!0,onSuccess:()=>{j(!0)}})},E=()=>{j(!1)};return e.jsxs(W,{title:"Edit Property",children:[e.jsx(b,{startIcon:e.jsx(N,{}),onClick:()=>g.visit("/host/properties"),sx:{mb:3,color:"#6B7280",textTransform:"none","&:hover":{bgcolor:"#F9FAFB",color:"#111827"}},children:"Back to Properties"}),e.jsx(_,{elevation:0,sx:{border:"1px solid #E5E7EB",borderRadius:"16px"},children:e.jsxs(U,{sx:{p:{xs:2,md:4}},children:[e.jsx(l,{variant:"h5",sx:{fontWeight:700,color:"#111827",mb:4},children:"Edit Property Information"}),e.jsxs("form",{onSubmit:P,children:[e.jsxs(m,{children:[e.jsx(c,{xs:12,md:6,children:e.jsxs(p,{spacing:3,sx:{mb:{xs:3,md:0}},children:[e.jsx(n,{label:"Property Title",name:"title",value:o.title,onChange:a,required:!0,fullWidth:!0,sx:{mb:2}}),e.jsx(n,{label:"Location",name:"location",value:o.location,onChange:a,required:!0,fullWidth:!0,placeholder:"e.g., Malibu, California"}),e.jsx(n,{label:"Price per Night",name:"price",type:"number",value:o.price,onChange:a,required:!0,fullWidth:!0,InputProps:{startAdornment:e.jsx(l,{sx:{mr:1,color:"#6B7280"},children:"$"})}})]})}),e.jsx(c,{xs:12,md:6,children:e.jsxs(p,{spacing:3,children:[e.jsxs(F,{fullWidth:!0,required:!0,children:[e.jsx(B,{children:"Property Type"}),e.jsx(D,{value:o.property_type,onChange:r=>C("property_type",r.target.value),label:"Property Type",children:A.map(r=>e.jsx(u,{value:r,children:r.charAt(0).toUpperCase()+r.slice(1)},r))})]}),e.jsx(n,{label:"Bedrooms",name:"bedrooms",type:"number",value:o.bedrooms,onChange:a,required:!0,fullWidth:!0}),e.jsx(n,{label:"Bathrooms",name:"bathrooms",type:"number",value:o.bathrooms,onChange:a,required:!0,fullWidth:!0}),e.jsx(n,{label:"Guests",name:"guests",type:"number",value:o.guests,onChange:a,required:!0,fullWidth:!0})]})})]}),e.jsx(m,{className:"mt-3",children:e.jsx(c,{xs:12,children:e.jsx(n,{label:"Description",name:"description",value:o.description,onChange:a,required:!0,fullWidth:!0,multiline:!0,rows:6,placeholder:"Describe the property in detail..."})})}),e.jsx(m,{className:"mt-4",children:e.jsxs(c,{xs:12,children:[e.jsx(l,{variant:"h6",sx:{fontWeight:700,color:"#111827",mb:2},children:"Property Images"}),e.jsxs(d,{sx:{border:"2px dashed #D1D5DB",borderRadius:"12px",p:2,textAlign:"center",cursor:"pointer",mb:2,"&:hover":{borderColor:"#AD542D",bgcolor:"#FFF7F5"}},onClick:()=>document.getElementById("image-upload-edit")?.click(),children:[e.jsx(R,{sx:{fontSize:40,color:"#9CA3AF",mb:1}}),e.jsx(l,{sx:{color:"#374151"},children:"Add more images (PNG, JPG, GIF up to 2MB)"})]}),e.jsx("input",{id:"image-upload-edit",type:"file",accept:"image/*",multiple:!0,onChange:w,style:{display:"none"}}),s.images&&s.images.length>0&&e.jsxs(d,{sx:{mb:2},children:[e.jsx(l,{variant:"body2",sx:{color:"#6B7280",mb:1},children:"Current images"}),e.jsx(p,{direction:"row",flexWrap:"wrap",gap:2,children:s.images.map((r,t)=>e.jsx(d,{component:"img",src:r,alt:`Image ${t+1}`,sx:{width:120,height:90,objectFit:"cover",borderRadius:2,border:"1px solid #E5E7EB"}},t))})]}),e.jsx(p,{direction:"row",flexWrap:"wrap",gap:2,children:f.map((r,t)=>e.jsxs(d,{sx:{position:"relative"},children:[e.jsx(d,{component:"img",src:URL.createObjectURL(r),alt:`New ${t+1}`,sx:{width:120,height:90,objectFit:"cover",borderRadius:2,border:"1px solid #E5E7EB"}}),e.jsx(L,{size:"small",onClick:()=>I(t),sx:{position:"absolute",top:4,right:4,bgcolor:"rgba(0,0,0,0.6)",color:"white","&:hover":{bgcolor:"rgba(0,0,0,0.8)"}},children:e.jsx(q,{fontSize:"small"})})]},t))}),e.jsx(l,{variant:"caption",sx:{color:"#6B7280",mt:1,display:"block"},children:"Add more images below. First image is the main thumbnail."})]})}),e.jsx(m,{className:"mt-4",children:e.jsx(c,{xs:12,children:e.jsxs(F,{fullWidth:!0,children:[e.jsx(B,{children:"Status"}),e.jsxs(D,{value:o.status,onChange:r=>C("status",r.target.value),label:"Status",children:[e.jsx(u,{value:"Pending",children:"Pending"}),e.jsx(u,{value:"Active",children:"Active"}),e.jsx(u,{value:"Inactive",children:"Inactive"})]})]})})}),e.jsx(m,{className:"mt-4",children:e.jsx(c,{xs:12,children:e.jsxs(p,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"flex-end",sx:{width:"100%"},children:[e.jsx(b,{variant:"outlined",onClick:()=>g.visit("/host/properties"),sx:{textTransform:"none",borderColor:"#D1D5DB",color:"#6B7280","&:hover":{borderColor:"#9CA3AF",bgcolor:"#F9FAFB"}},children:"Cancel"}),e.jsx(b,{type:"submit",variant:"contained",sx:{bgcolor:"#AD542D",textTransform:"none",fontWeight:700,"&:hover":{bgcolor:"#78381C"}},children:"Update Property"})]})})})]})]})}),e.jsx(k,{open:S,onClose:E,message:"Property updated successfully!",severity:"success"})]})}export{le as default};
