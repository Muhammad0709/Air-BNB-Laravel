import{b as _,r as p,j as e,H as q,a as f}from"./app-k1GojqXu.js";import{A as U}from"./AdminLayout-BqRDa1WY.js";import{T as z}from"./Toast-Ba1L8pdR.js";import{S as W}from"./Save-CZpg3PDW.js";import{P as G}from"./PhotoCamera-CjnCxIDc.js";import{B as a,T as i}from"./Box-D4yAPD6z.js";import{R as M,C as A}from"./Row-BGspGPYI.js";import{C as b,a as v}from"./CardContent-DBiktHXJ.js";import{S as x,B as h}from"./Stack-CYseCBxy.js";import{A as N}from"./KeyboardArrowDown-CQnTADGU.js";import{T as m}from"./TextField-CFKFQx2k.js";/* empty css            */import"./Logout-D6ncuuCu.js";import"./People-DkW7LLrw.js";import"./Hotel-w8LsJmGb.js";import"./Container-DsV2d6KA.js";import"./CheckCircle-BNaB4qOb.js";import"./Close-Ba8cFB5d.js";import"./Snackbar-DNMqrWeB.js";import"./useFormControl-CHHJCYs2.js";function le(){const{url:y,props:t}=_(),o=t.user,[g,u]=p.useState({open:!1,message:"",severity:"success"}),[n,P]=p.useState({name:o?.name??"",email:o?.email??"",profileImage:o?.profile_picture??null}),[l,C]=p.useState({currentPassword:"",newPassword:"",confirmPassword:""});p.useEffect(()=>{o&&P({name:o.name??"",email:o.email??"",profileImage:o.profile_picture??null})},[o?.id,o?.name,o?.email,o?.profile_picture]),p.useEffect(()=>{t.flash?.success&&u({open:!0,message:t.flash.success,severity:"success"}),t.flash?.error&&u({open:!0,message:t.flash.error,severity:"error"})},[t.flash?.success,t.flash?.error]);const D=r=>{const{name:s,value:d}=r.target;P(w=>({...w,[s]:d}))},j=r=>{const{name:s,value:d}=r.target;C(w=>({...w,[s]:d}))},F=r=>{const s=r.target.files?.[0];if(!s)return;if(s.size>2*1024*1024){u({open:!0,message:"Image must be 2MB or less.",severity:"error"}),r.target.value="";return}const d=new FormData;d.append("profile_picture",s),f.post("/admin/settings/picture",d,{preserveScroll:!0}),r.target.value=""},T=r=>{r.preventDefault(),f.put("/admin/settings/profile",{name:n.name,email:n.email},{preserveScroll:!0})},I=r=>{r.preventDefault(),f.put("/admin/settings/password",{current_password:l.currentPassword,new_password:l.newPassword,new_password_confirmation:l.confirmPassword},{preserveScroll:!0,onSuccess:()=>C({currentPassword:"",newPassword:"",confirmPassword:""})})},B=r=>(r||"").split(" ").map(s=>s[0]).join("").slice(0,2),S=n.profileImage||o?.profile_picture||null,R=[{id:"profile",label:"Profile",path:"/admin/settings/profile"},{id:"password",label:"Password",path:"/admin/settings/password"}],c=y.includes("profile")?"profile":y.includes("password")?"password":"profile",E=()=>c==="profile"?"Profile settings":c==="password"?"Password settings":"Settings";return e.jsxs(e.Fragment,{children:[e.jsx(q,{title:E()}),e.jsxs(U,{title:E(),children:[e.jsxs(a,{sx:{mb:4},children:[e.jsx(i,{variant:"h4",sx:{fontWeight:700,color:"#222222",mb:1},children:"Settings"}),e.jsx(i,{variant:"body1",sx:{color:"#717171"},children:"Manage your profile and account settings"})]}),e.jsxs(M,{children:[e.jsx(A,{xs:12,md:3,children:e.jsx(b,{elevation:0,sx:{border:"1px solid #E5E7EB",borderRadius:2,mb:3},children:e.jsx(v,{sx:{p:0},children:e.jsx(x,{spacing:0,children:R.map(r=>{const s=c===r.id;return e.jsx(h,{fullWidth:!0,onClick:()=>f.visit(r.path),sx:{justifyContent:"flex-start",px:3,py:2,textTransform:"none",color:s?"#AD542D":"#717171",fontWeight:s?700:500,bgcolor:s?"#FFF5F7":"transparent",borderRadius:0,borderLeft:s?"3px solid #AD542D":"3px solid transparent","&:hover":{bgcolor:s?"#FFF5F7":"#F9FAFB"}},children:r.label},r.id)})})})})}),e.jsxs(A,{xs:12,md:9,children:[c==="profile"&&e.jsx(b,{elevation:0,sx:{border:"1px solid #E5E7EB",borderRadius:"20px",width:"100%",maxWidth:"800px"},children:e.jsxs(v,{sx:{p:4},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:700,color:"#222222",mb:1},children:"Profile"}),e.jsx(i,{variant:"body2",sx:{color:"#717171",mb:4},children:"Update your profile details"}),e.jsx("form",{onSubmit:T,children:e.jsxs(x,{spacing:4,children:[e.jsx(a,{children:e.jsxs(x,{direction:"row",spacing:3,alignItems:"center",children:[e.jsxs(a,{sx:{position:"relative"},children:[e.jsx(N,{src:S||void 0,sx:{width:100,height:100,bgcolor:"#AD542D",fontSize:"2rem",fontWeight:700},children:!S&&B(n.name)}),e.jsx(a,{sx:{position:"absolute",bottom:0,right:0,bgcolor:"#AD542D",borderRadius:"50%",p:.5,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(G,{sx:{fontSize:16,color:"#FFFFFF"}})}),e.jsx("input",{type:"file",accept:"image/*",onChange:F,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer"}})]}),e.jsxs(a,{children:[e.jsxs(h,{variant:"outlined",component:"label",sx:{borderColor:"#D0D5DD",color:"#344054",textTransform:"none",borderRadius:2,"&:hover":{borderColor:"#D0D5DD",bgcolor:"#F9FAFB"}},children:["Upload picture",e.jsx("input",{type:"file",accept:"image/*",onChange:F,hidden:!0})]}),e.jsx(i,{variant:"body2",sx:{color:"#717171",mt:1},children:"JPG, PNG or GIF. 2MB max."})]})]})}),e.jsx(m,{label:"Name",name:"name",value:n.name,onChange:D,fullWidth:!0,required:!0}),e.jsx(m,{label:"Email address",name:"email",type:"email",value:n.email,onChange:D,fullWidth:!0,required:!0}),e.jsx(a,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(h,{type:"submit",variant:"contained",startIcon:e.jsx(W,{}),sx:{bgcolor:"#AD542D",textTransform:"none",borderRadius:2,fontWeight:700,px:4,py:1.5,"&:hover":{bgcolor:"#78381C"}},children:"Save"})})]})})]})}),c==="password"&&e.jsx(b,{elevation:0,sx:{border:"1px solid #E5E7EB",borderRadius:"20px",width:"100%",maxWidth:"800px"},children:e.jsxs(v,{sx:{p:4},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:700,color:"#222222",mb:1},children:"Update password"}),e.jsx(i,{variant:"body2",sx:{color:"#717171",mb:4},children:"Ensure your account is using a long, random password to stay secure"}),e.jsx("form",{onSubmit:I,children:e.jsxs(x,{spacing:3,children:[e.jsx(m,{label:"Current password",name:"currentPassword",type:"password",value:l.currentPassword,onChange:j,fullWidth:!0,required:!0}),e.jsx(m,{label:"New password",name:"newPassword",type:"password",value:l.newPassword,onChange:j,fullWidth:!0,required:!0}),e.jsx(m,{label:"Confirm password",name:"confirmPassword",type:"password",value:l.confirmPassword,onChange:j,fullWidth:!0,required:!0}),e.jsx(a,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(h,{type:"submit",variant:"contained",startIcon:e.jsx(W,{}),sx:{bgcolor:"#AD542D",textTransform:"none",borderRadius:2,fontWeight:700,px:4,py:1.5,"&:hover":{bgcolor:"#78381C"}},children:"Save password"})})]})})]})})]})]}),e.jsx(z,{open:g.open,onClose:()=>u(r=>({...r,open:!1})),message:g.message,severity:g.severity})]})]})}export{le as default};
