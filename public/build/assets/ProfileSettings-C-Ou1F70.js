import{b as q,u as P,r as v,a as x,j as e,H as U}from"./app-rC_Untpj.js";import{N as G,F as H}from"./Footer-DG--L2TP.js";import{T as k}from"./Toast-nY178XWj.js";import{S as W}from"./Save-AdhixXiu.js";import{P as J}from"./PhotoCamera-C9IU4BWl.js";import{u as L}from"./use-language-reb6vBMA.js";import{B as i,T as t}from"./Box-Bt3jkSqy.js";import{C as K}from"./Container-DzzB6KIi.js";import{R as Q,C as V}from"./Row-BC5P-dgl.js";import{P as _,S as g,B as C}from"./Stack-CyiA1vL9.js";import{A as X}from"./KeyboardArrowDown-8tMyqA0w.js";import{T as d}from"./TextField-DblC5PLy.js";/* empty css            */import"./Close-CKdSoYIG.js";import"./Snackbar-DsrJFk-X.js";import"./useFormControl-jTL-W0PA.js";function fe(){const{t:a}=L(),{props:D}=q(),l=D.user,{data:c,setData:z,patch:A,processing:E,errors:r}=P({name:l?.name||"",email:l?.email||"",phone:l?.phone||"",bio:l?.bio||""}),{data:b,setData:T,patch:M,processing:F,errors:s,reset:R}=P({current_password:"",new_password:"",new_password_confirmation:""}),[u,p]=v.useState({open:!1,message:"",severity:"success"}),[w,f]=v.useState(!1);v.useEffect(()=>{const o=D?.flash;o?.success&&(p({open:!0,message:o.success,severity:"success"}),f(!1),x.reload({only:["user"]})),o?.error&&(p({open:!0,message:o.error,severity:"error"}),f(!1))},[D?.flash]);const m=o=>{const{name:n,value:h}=o.target;z(n,h)},j=o=>{const{name:n,value:h}=o.target;T(n,h)},B=o=>{o.preventDefault(),A("/profile/update",{onSuccess:()=>{x.reload({only:["user"]})}})},I=o=>{o.preventDefault(),M("/profile/password",{onSuccess:()=>{R()}})},N=o=>{const n=o.target.files?.[0];if(!n)return;if(n.size>2*1024*1024){p({open:!0,message:a("profile_settings.file_size_error"),severity:"error"}),o.target.value="";return}if(!["image/jpeg","image/jpg","image/png","image/gif"].includes(n.type)){p({open:!0,message:a("profile_settings.file_type_error"),severity:"error"}),o.target.value="";return}f(!0);const S=new FormData;S.append("profile_picture",n),x.post("/profile/picture",S,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{x.reload({only:["user"]}),o.target.value=""},onError:y=>{f(!1);const O=y?.profile_picture?.[0]||y?.message||"Failed to upload profile picture.";p({open:!0,message:O,severity:"error"}),o.target.value=""}})};return e.jsxs(e.Fragment,{children:[e.jsx(U,{title:"Profile Settings"}),e.jsxs(i,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[e.jsx(G,{}),e.jsx(i,{className:"profile-settings-page",sx:{flex:1},children:e.jsxs(K,{children:[e.jsxs(i,{sx:{textAlign:"center",mb:6,mt:4},children:[e.jsx(t,{variant:"h2",sx:{fontSize:"2rem",fontWeight:800,color:"#111827",mb:2},children:"Profile Settings"}),e.jsx(t,{variant:"body1",sx:{color:"#6B7280",fontSize:"1rem",maxWidth:600,mx:"auto"},children:"Manage your account settings and preferences"})]}),e.jsx(Q,{className:"g-4 justify-content-center",children:e.jsxs(V,{xs:12,md:10,lg:8,xl:7,children:[e.jsxs(_,{elevation:0,sx:{p:4,border:"1px solid #E5E7EB",borderRadius:"16px",mb:3},children:[e.jsx(t,{variant:"h5",sx:{fontWeight:700,color:"#111827",mb:3},children:a("profile_settings.profile_picture")}),e.jsxs(g,{direction:"row",spacing:3,alignItems:"center",children:[e.jsx(X,{src:l?.profile_picture,sx:{width:100,height:100,bgcolor:"#AD542D",fontSize:"2.5rem",fontWeight:700},children:!l?.profile_picture&&(c.name||l?.name||"").split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2)}),e.jsxs(g,{spacing:2,sx:{flex:1},children:[e.jsxs(C,{variant:"outlined",startIcon:e.jsx(J,{}),component:"label",disabled:w,sx:{borderColor:"#D0D5DD",color:"#344054",textTransform:"none",borderRadius:"12px",alignSelf:"flex-start","&:hover":{borderColor:"#D0D5DD",bgcolor:"#F9FAFB"},"&:disabled":{borderColor:"#D1D5DB",color:"#9CA3AF",cursor:"not-allowed"}},children:[a(w?"profile_settings.saving":"profile_settings.upload_photo"),e.jsx("input",{type:"file",hidden:!0,accept:"image/jpeg,image/jpg,image/png,image/gif",onChange:N,disabled:w})]}),e.jsx(t,{variant:"body2",sx:{color:"#6B7280"},children:"JPG, PNG or GIF. Max size 2MB"})]})]})]}),e.jsxs(_,{elevation:0,sx:{p:4,border:"1px solid #E5E7EB",borderRadius:"16px",mb:3},children:[e.jsx(t,{variant:"h5",sx:{fontWeight:700,color:"#111827",mb:3},children:a("profile_settings.personal_info")}),e.jsx("form",{onSubmit:B,children:e.jsxs(g,{spacing:3,children:[e.jsxs(i,{children:[e.jsx(t,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:a("profile_settings.name")}),e.jsx(d,{name:"name",value:c.name,onChange:m,placeholder:a("profile_settings.name_placeholder"),fullWidth:!0,required:!0,size:"small",error:!!r.name,helperText:r.name,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:r.name?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:r.name?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:r.name?"#EF4444":"#AD542D"}}}})]}),e.jsxs(i,{children:[e.jsx(t,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:"Email Address"}),e.jsx(d,{name:"email",type:"email",value:c.email,onChange:m,placeholder:"your.email@example.com",fullWidth:!0,required:!0,size:"small",error:!!r.email,helperText:r.email,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:r.email?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:r.email?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:r.email?"#EF4444":"#AD542D"}}}})]}),e.jsxs(i,{children:[e.jsx(t,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:"Phone Number"}),e.jsx(d,{name:"phone",value:c.phone,onChange:m,placeholder:"+1 (555) 123-4567",fullWidth:!0,size:"small",error:!!r.phone,helperText:r.phone,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:r.phone?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:r.phone?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:r.phone?"#EF4444":"#AD542D"}}}})]}),e.jsxs(i,{children:[e.jsx(t,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:"Bio"}),e.jsx(d,{name:"bio",value:c.bio,onChange:m,placeholder:"Tell us about yourself...",fullWidth:!0,multiline:!0,rows:4,error:!!r.bio,helperText:r.bio,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:r.bio?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:r.bio?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:r.bio?"#EF4444":"#AD542D"}}}})]}),e.jsx(C,{type:"submit",variant:"contained",startIcon:e.jsx(W,{}),disabled:E,sx:{bgcolor:"#AD542D",borderRadius:"999px",py:1.5,textTransform:"none",fontWeight:700,fontSize:"0.875rem",alignSelf:"flex-start","&:hover":{bgcolor:"#78381C"},"&:disabled":{bgcolor:"#D1D5DB",color:"#9CA3AF"}},children:E?"Saving...":"Save Changes"})]})})]}),e.jsxs(_,{elevation:0,sx:{p:4,border:"1px solid #E5E7EB",borderRadius:"16px"},children:[e.jsx(t,{variant:"h5",sx:{fontWeight:700,color:"#111827",mb:3},children:"Change Password"}),e.jsx("form",{onSubmit:I,children:e.jsxs(g,{spacing:3,children:[e.jsxs(i,{children:[e.jsx(t,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:"Current Password"}),e.jsx(d,{name:"current_password",type:"password",value:b.current_password,onChange:j,placeholder:"Enter current password",fullWidth:!0,required:!0,size:"small",error:!!s.current_password,helperText:s.current_password,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:s.current_password?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:s.current_password?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:s.current_password?"#EF4444":"#AD542D"}}}})]}),e.jsxs(i,{children:[e.jsx(t,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:"New Password"}),e.jsx(d,{name:"new_password",type:"password",value:b.new_password,onChange:j,placeholder:"Enter new password",fullWidth:!0,required:!0,size:"small",error:!!s.new_password,helperText:s.new_password,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:s.new_password?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:s.new_password?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:s.new_password?"#EF4444":"#AD542D"}}}})]}),e.jsxs(i,{children:[e.jsx(t,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:"Confirm New Password"}),e.jsx(d,{name:"new_password_confirmation",type:"password",value:b.new_password_confirmation,onChange:j,placeholder:"Confirm new password",fullWidth:!0,required:!0,size:"small",error:!!s.new_password_confirmation,helperText:s.new_password_confirmation,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:s.new_password_confirmation?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:s.new_password_confirmation?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:s.new_password_confirmation?"#EF4444":"#AD542D"}}}})]}),e.jsx(C,{type:"submit",variant:"contained",startIcon:e.jsx(W,{}),disabled:F,sx:{bgcolor:"#AD542D",borderRadius:"999px",py:1.5,textTransform:"none",fontWeight:700,fontSize:"0.875rem",alignSelf:"flex-start","&:hover":{bgcolor:"#78381C"},"&:disabled":{bgcolor:"#D1D5DB",color:"#9CA3AF"}},children:F?"Updating...":"Update Password"})]})})]})]})})]})}),e.jsx(H,{}),e.jsx(k,{open:u.open,onClose:()=>p({...u,open:!1}),message:u.message,severity:u.severity})]})]})}export{fe as default};
