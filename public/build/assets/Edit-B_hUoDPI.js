import{b as T,r as x,j as e,a as g}from"./app-CshQHvoQ.js";import{H as W}from"./HostLayout-Bs0Pov25.js";import{T as k}from"./Toast-CSz1dMyW.js";import{A as N}from"./ArrowBack-CD-Jgh51.js";import{C as R}from"./CloudUpload-DzlNw4Yq.js";import{D as q}from"./Delete-mtpXMNXf.js";import{B as b,S as c}from"./Stack-CAsQuehU.js";import{C as _,a as U}from"./CardContent-BSJARNOA.js";import{T as l,B as d}from"./Box-DVCHXNWp.js";import{R as m,C as p}from"./Row-C5SUOQ6D.js";import{T as n,F,I as B,S as D}from"./TextField-aFRT8OcK.js";import{M as u}from"./MenuItem-CXWZNhxe.js";import{I as G}from"./KeyboardArrowDown-DZfY7zsm.js";/* empty css            */import"./Logout-BqnYrbgZ.js";import"./Hotel-DnwjP3cQ.js";import"./Message-BQZisnmn.js";import"./use-language-DEA0B3GS.js";import"./Container-B4HNsH9A.js";import"./CheckCircle-DdUDl4QP.js";import"./Close-DNE4SAkV.js";import"./Snackbar-QBAx_-dD.js";import"./useFormControl-BbhxE_0w.js";function ce(){const{property:s,propertyTypes:A}=T().props,[I,j]=x.useState(!1),[f,y]=x.useState([]),[o,v]=x.useState({title:s.title,location:s.location,price:s.price.toString(),bedrooms:s.bedrooms.toString(),bathrooms:s.bathrooms.toString(),guests:s.guests.toString(),property_type:s.property_type,status:s.status,description:s.description}),a=t=>{const{name:r,value:i}=t.target;v(h=>({...h,[r]:i}))},C=(t,r)=>{v(i=>({...i,[t]:r}))},S=t=>{const r=t.target.files?Array.from(t.target.files):[];r.length&&y(i=>[...i,...r]),t.target.value=""},w=t=>{y(r=>r.filter((i,h)=>h!==t))},P=t=>{t.preventDefault();const r=new FormData;r.append("title",o.title),r.append("location",o.location),r.append("price",o.price),r.append("bedrooms",o.bedrooms),r.append("bathrooms",o.bathrooms),r.append("guests",o.guests),r.append("property_type",o.property_type),r.append("status",o.status),r.append("description",o.description),r.append("_method","PUT"),f.forEach(i=>r.append("images[]",i)),g.post(`/host/properties/${s.id}`,r,{forceFormData:!0,onSuccess:()=>{j(!0)}})},E=()=>{j(!1)};return e.jsxs(W,{title:"Edit Property",children:[e.jsx(b,{startIcon:e.jsx(N,{}),onClick:()=>g.visit("/host/properties"),sx:{mb:3,color:"#6B7280",textTransform:"none","&:hover":{bgcolor:"#F9FAFB",color:"#111827"}},children:"Back to Properties"}),e.jsx(_,{elevation:0,sx:{border:"1px solid #E5E7EB",borderRadius:"16px"},children:e.jsxs(U,{sx:{p:{xs:2,md:4}},children:[e.jsx(l,{variant:"h5",sx:{fontWeight:700,color:"#111827",mb:4},children:"Edit Property Information"}),e.jsxs("form",{onSubmit:P,children:[e.jsxs(m,{children:[e.jsx(p,{xs:12,md:6,children:e.jsxs(c,{spacing:3,sx:{mb:{xs:3,md:0}},children:[e.jsx(n,{label:"Property Title",name:"title",value:o.title,onChange:a,required:!0,fullWidth:!0,sx:{mb:2}}),e.jsx(n,{label:"Location",name:"location",value:o.location,onChange:a,required:!0,fullWidth:!0,placeholder:"e.g., Malibu, California"}),e.jsx(n,{label:"Price per Night",name:"price",type:"number",value:o.price,onChange:a,required:!0,fullWidth:!0,InputProps:{startAdornment:e.jsx(l,{sx:{marginInlineEnd:1,color:"#6B7280"},children:"$"})}})]})}),e.jsx(p,{xs:12,md:6,children:e.jsxs(c,{spacing:3,children:[e.jsxs(F,{fullWidth:!0,required:!0,children:[e.jsx(B,{children:"Property Type"}),e.jsx(D,{value:o.property_type,onChange:t=>C("property_type",t.target.value),label:"Property Type",children:A.map(t=>e.jsx(u,{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),e.jsx(n,{label:"Bedrooms",name:"bedrooms",type:"number",value:o.bedrooms,onChange:a,required:!0,fullWidth:!0}),e.jsx(n,{label:"Bathrooms",name:"bathrooms",type:"number",value:o.bathrooms,onChange:a,required:!0,fullWidth:!0}),e.jsx(n,{label:"Guests",name:"guests",type:"number",value:o.guests,onChange:a,required:!0,fullWidth:!0})]})})]}),e.jsx(m,{className:"mt-3",children:e.jsx(p,{xs:12,children:e.jsx(n,{label:"Description",name:"description",value:o.description,onChange:a,required:!0,fullWidth:!0,multiline:!0,rows:6,placeholder:"Describe the property in detail..."})})}),e.jsx(m,{className:"mt-4",children:e.jsxs(p,{xs:12,children:[e.jsx(l,{variant:"h6",sx:{fontWeight:700,color:"#111827",mb:2},children:"Property Images"}),e.jsxs(d,{sx:{border:"2px dashed #D1D5DB",borderRadius:"12px",p:2,textAlign:"center",cursor:"pointer",mb:2,"&:hover":{borderColor:"#AD542D",bgcolor:"#FFF7F5"}},onClick:()=>document.getElementById("image-upload-edit")?.click(),children:[e.jsx(R,{sx:{fontSize:40,color:"#9CA3AF",mb:1}}),e.jsx(l,{sx:{color:"#374151"},children:"Add more images (PNG, JPG, GIF up to 2MB)"})]}),e.jsx("input",{id:"image-upload-edit",type:"file",accept:"image/*",multiple:!0,onChange:S,style:{display:"none"}}),s.images&&s.images.length>0&&e.jsxs(d,{sx:{mb:2},children:[e.jsx(l,{variant:"body2",sx:{color:"#6B7280",mb:1},children:"Current images"}),e.jsx(c,{direction:"row",flexWrap:"wrap",gap:2,children:s.images.map((t,r)=>e.jsx(d,{component:"img",src:t,alt:`Image ${r+1}`,sx:{width:120,height:90,objectFit:"cover",borderRadius:2,border:"1px solid #E5E7EB"}},r))})]}),e.jsx(c,{direction:"row",flexWrap:"wrap",gap:2,children:f.map((t,r)=>e.jsxs(d,{sx:{position:"relative"},children:[e.jsx(d,{component:"img",src:URL.createObjectURL(t),alt:`New ${r+1}`,sx:{width:120,height:90,objectFit:"cover",borderRadius:2,border:"1px solid #E5E7EB"}}),e.jsx(G,{size:"small",onClick:()=>w(r),sx:{position:"absolute",top:4,right:4,bgcolor:"rgba(0,0,0,0.6)",color:"white","&:hover":{bgcolor:"rgba(0,0,0,0.8)"}},children:e.jsx(q,{fontSize:"small"})})]},r))}),e.jsx(l,{variant:"caption",sx:{color:"#6B7280",mt:1,display:"block"},children:"Add more images below. First image is the main thumbnail."})]})}),e.jsx(m,{className:"mt-4",children:e.jsx(p,{xs:12,children:e.jsxs(F,{fullWidth:!0,children:[e.jsx(B,{children:"Status"}),e.jsxs(D,{value:o.status,onChange:t=>C("status",t.target.value),label:"Status",children:[e.jsx(u,{value:"Pending",children:"Pending"}),e.jsx(u,{value:"Active",children:"Active"}),e.jsx(u,{value:"Inactive",children:"Inactive"})]})]})})}),e.jsx(m,{className:"mt-4",children:e.jsx(p,{xs:12,children:e.jsxs(c,{direction:{xs:"column",sm:"row"},spacing:2,useFlexGap:!0,justifyContent:"flex-end",sx:{width:"100%"},children:[e.jsx(b,{variant:"outlined",onClick:()=>g.visit("/host/properties"),sx:{textTransform:"none",borderColor:"#D1D5DB",color:"#6B7280","&:hover":{borderColor:"#9CA3AF",bgcolor:"#F9FAFB"}},children:"Cancel"}),e.jsx(b,{type:"submit",variant:"contained",sx:{bgcolor:"#AD542D",textTransform:"none",fontWeight:700,"&:hover":{bgcolor:"#78381C"}},children:"Update Property"})]})})})]})]})}),e.jsx(k,{open:I,onClose:E,message:"Property updated successfully!",severity:"success"})]})}export{ce as default};
