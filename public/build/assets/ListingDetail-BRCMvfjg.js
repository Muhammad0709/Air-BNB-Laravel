import{j as e,b as pe,r as d,c as je,H as ge,a as V}from"./app-CzLFsAEq.js";import{N as ue,F as fe}from"./Footer-p_tcApPp.js";import{u as Ne,B as t,T as a}from"./use-language-Dm9Rx_bi.js";import{f as J}from"./currency-DKMrUsgB.js";import{F as ye}from"./FeaturedCard-_KYjt66-.js";import{L as be}from"./LocationOn-BbIYkH3z.js";import{S as A}from"./Star-CgW0r6b3.js";import{C as _e}from"./CheckCircle-C32MAtuu.js";import{C as K,a as Q}from"./ChevronRight-Iki0BxXq.js";import{B as De}from"./Bed-Drf75DUH.js";import{c as k,P as o,B as p,S as X}from"./ArrowDropDown-DwblFUVA.js";import{P as Se}from"./People-xR4YF0HX.js";import{H as ke}from"./Home-C6KJLtub.js";import{M as ve}from"./Message-BAhGkiVK.js";import{A as Me}from"./AccessTime-C832ubuY.js";import{A as Z}from"./AttachMoney-BiATJPW7.js";import{C as f}from"./Container-B4L-e_Ox.js";import{R as h,C as c}from"./Row-CBMI7uZy.js";import{F as ee}from"./FormControlLabel-CGIbc-53.js";import{C as se}from"./Checkbox-Bltwbka3.js";/* empty css            */import"./KeyboardArrowDown-C5jSsfdf.js";import"./Close-CC3H5YgY.js";import"./useFormControl-1318mGBd.js";const we=k(e.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M9 18c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m0-3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m3 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m0-3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m3 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m0-3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m2-3H7v-1c0-2.76 2.24-5 5-5s5 2.24 5 5z"})),Ce=k(e.jsx("path",{d:"M2.5 19h19v2h-19zm19.57-9.36c-.21-.8-1.04-1.28-1.84-1.06L14.92 10l-6.9-6.43-1.93.51 4.14 7.17-4.97 1.33-1.97-1.54-1.45.39 2.59 4.49s7.12-1.9 16.57-4.43c.81-.23 1.28-1.05 1.07-1.85"})),Ie=k(e.jsx("path",{d:"M21 4H7V2H5v20h2v-8h14l-2-5zm-6 5c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2"})),ze=k([e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")]),F="/images/popular-stay-1.svg";function te(r){const[n,N,y]=r.split("-").map(Number);return{year:n??new Date().getFullYear(),month:(N??new Date().getMonth()+1)-1,day:y??1}}function ts(){const{t:r}=Ne(),{property:n,relatedProperties:N,reviews:y,ratingStats:m,defaultCheckin:$,defaultCheckout:P}=pe().props,b=new Date,v=$?te($):{year:b.getFullYear(),month:b.getMonth(),day:b.getDate()},M=P?te(P):(()=>{const s=new Date(b);return s.setDate(s.getDate()+7),{year:s.getFullYear(),month:s.getMonth(),day:s.getDate()}})(),[j,E]=d.useState(()=>new Date(v.year,v.month,1)),[g,B]=d.useState(()=>new Date(M.year,M.month,1)),[T,ae]=d.useState(v.day),[H,ne]=d.useState(M.day),[w,ie]=d.useState(!1),[C,le]=d.useState(!1),{currency:L}=je(),re=!!n.airport_pickup_enabled,ce=!!n.guided_tours_enabled,O=s=>s!=null?J(Number(s),L):"—",I=d.useMemo(()=>Array.isArray(n.images)&&n.images.length>0?n.images:n.image?[n.image]:[F],[n.images,n.image]),_=d.useMemo(()=>{const i=I.slice(0,8),l=i[0]||F;for(;i.length<8;)i.push(l);return i},[I]),R=Math.max(0,I.length-8),W=s=>{const i=s===1?j:g,l=new Date(i);l.setMonth(l.getMonth()-1),s===1?E(l):B(l)},Y=s=>{const i=s===1?j:g,l=new Date(i);l.setMonth(l.getMonth()+1),s===1?E(l):B(l)},q=s=>{const i=s.getFullYear(),l=s.getMonth(),D=new Date(i,l,1).getDay(),S=new Date(i,l+1,0).getDate(),z=new Date(i,l,0).getDate(),u=[];for(let x=D-1;x>=0;x--)u.push({day:z-x,isOtherMonth:!0});for(let x=1;x<=S;x++)u.push({day:x,isOtherMonth:!1});for(;u.length<42;)u.push({day:u.length-S-D+1,isOtherMonth:!0});return u},G=s=>s.toLocaleString("default",{month:"short",year:"numeric"}),oe=q(j),me=q(g),de=()=>{const s=j.getFullYear(),i=j.getMonth(),l=g.getFullYear(),D=g.getMonth(),S=`${s}-${String(i+1).padStart(2,"0")}-${String(T).padStart(2,"0")}`,z=`${l}-${String(D+1).padStart(2,"0")}-${String(H).padStart(2,"0")}`;return{checkin:S,checkout:z}},he=()=>{const{checkin:s,checkout:i}=de();return`/booking/redirect?${new URLSearchParams({property_id:String(n.id),checkin:s,checkout:i}).toString()}`},xe=typeof n.price=="number"?n.price:Number(n.price)||0,U=n.host?.created_at?new Date(n.host.created_at).getFullYear():"";return e.jsxs(t,{children:[e.jsx(ge,{title:n.title||"Property Detail"}),e.jsx(ue,{}),e.jsxs("main",{className:"property-detail-page",children:[e.jsx("section",{className:"property-details-section",children:e.jsx(f,{children:e.jsx(h,{children:e.jsx(c,{lg:12,children:e.jsx(o,{className:"property-info-card",elevation:0,children:e.jsxs(h,{className:"align-items-center",children:[e.jsxs(c,{md:10,children:[e.jsx(a,{className:"property-title",component:"h1",children:n.title}),e.jsxs(t,{className:"property-meta",children:[e.jsxs(t,{className:"location",children:[e.jsx(be,{sx:{fontSize:16}}),e.jsx("span",{children:n.location})]}),e.jsxs(t,{className:"rating",children:[e.jsx(t,{className:"stars",children:[...Array(5)].map((s,i)=>e.jsx(A,{sx:{fontSize:14,color:i<Math.round(m.average)?"#FFD700":"#e9ecef"}},i))}),e.jsxs(a,{className:"rating-text",children:["(",m.total,")"]})]})]})]}),e.jsx(c,{md:2,children:e.jsxs(t,{className:"booking-info",children:[e.jsxs(t,{className:"price",children:[e.jsx(a,{component:"span",className:"price-amount",children:J(xe,L)}),e.jsx(a,{component:"span",className:"price-period",children:r("listing_detail.per_night")})]}),e.jsx(p,{variant:"contained",className:"btn-book",onClick:()=>V.visit(he()),children:r("listing_detail.book")})]})})]})})})})})}),e.jsx("section",{className:"gallery-section",children:e.jsx(f,{children:e.jsxs(t,{className:"gallery-grid-container",children:[e.jsxs(t,{className:"gallery-top-section",children:[e.jsx(t,{className:"gallery-large-item",children:e.jsx("button",{type:"button",className:"gallery-image-button",children:e.jsx("img",{src:_[0],alt:`${n.title} - 1`,className:"gallery-image"})})}),e.jsxs(t,{className:"gallery-right-section",children:[e.jsx(t,{className:"gallery-medium-item",children:e.jsx("button",{type:"button",className:"gallery-image-button",children:e.jsx("img",{src:_[1],alt:`${n.title} - 2`,className:"gallery-image"})})}),e.jsx(t,{className:"gallery-medium-item",children:e.jsx("button",{type:"button",className:"gallery-image-button",children:e.jsx("img",{src:_[2],alt:`${n.title} - 3`,className:"gallery-image"})})})]})]}),e.jsx(t,{className:"gallery-bottom-section",children:_.slice(3,8).map((s,i)=>e.jsx(t,{className:"gallery-small-item",children:e.jsxs("button",{type:"button",className:"gallery-image-button",children:[e.jsx("img",{src:s,alt:`${n.title} - ${i+4}`,className:"gallery-image"}),i===4&&R>0&&e.jsx(t,{className:"gallery-more-overlay",children:e.jsxs(a,{component:"span",children:["+",R," ",r("listing_detail.more_photos")]})})]})},i+3))})]})})}),e.jsx("section",{children:e.jsx(f,{className:"mt-4",children:e.jsxs(o,{className:"quick-info-section",elevation:0,children:[e.jsx(a,{className:"section-title",component:"h2",children:r("listing_detail.quick_info")}),e.jsxs(h,{className:"g-4",children:[e.jsx(c,{md:6,sm:6,children:e.jsxs(t,{className:"info-item d-flex gap-2",children:[e.jsx(t,{className:"info-icon",children:e.jsx(De,{sx:{color:"#AD542D",fontSize:"24px",width:"24px",height:"24px",marginInlineEnd:1.5}})}),e.jsxs(t,{className:"info-text",children:[e.jsx(a,{component:"span",className:"info-number",children:n.bedrooms}),e.jsx(a,{component:"span",className:"info-label",children:r("listing_detail.bedrooms")})]})]})}),e.jsx(c,{md:6,sm:6,children:e.jsxs(t,{className:"info-item d-flex gap-2",children:[e.jsx(t,{className:"info-icon",children:e.jsx(we,{sx:{color:"#AD542D",fontSize:"24px",width:"24px",height:"24px",marginInlineEnd:1.5}})}),e.jsx(a,{component:"span",className:"info-number",children:n.bathrooms}),e.jsx(a,{component:"span",className:"info-label",children:r("listing_detail.bathrooms")})]})})]}),e.jsxs(h,{className:"g-4 mt-2",children:[e.jsx(c,{md:6,sm:6,children:e.jsxs(t,{className:"info-item d-flex gap-2",children:[e.jsx(t,{className:"info-icon",children:e.jsx(Se,{sx:{color:"#AD542D",fontSize:"24px",width:"24px",height:"24px",marginInlineEnd:1.5}})}),e.jsxs(t,{className:"info-text",children:[e.jsx(a,{component:"span",className:"info-number",children:n.guests}),e.jsx(a,{component:"span",className:"info-label",children:r("listing_detail.guests")})]})]})}),e.jsx(c,{md:6,sm:6,children:e.jsxs(t,{className:"info-item d-flex gap-2",children:[e.jsx(t,{className:"info-icon",children:e.jsx(ke,{sx:{color:"#AD542D",fontSize:"24px",width:"24px",height:"24px",marginInlineEnd:1.5}})}),e.jsx(a,{component:"span",className:"info-label",children:n.property_type||r("listing_detail.entire_place")})]})})]})]})})}),e.jsx("section",{children:e.jsx(f,{className:"mt-4",children:e.jsx(h,{children:e.jsxs(c,{lg:12,children:[e.jsxs(o,{className:"host-section mt-4",elevation:0,children:[e.jsx(a,{className:"section-title",component:"h2",children:r("listing_detail.about_host")}),e.jsxs(t,{className:"host-info",children:[e.jsx(t,{className:"host-avatar",children:e.jsx("img",{src:n.host?.profile_picture||"/images/popular-stay-1.svg",alt:n.host?.name||"Host",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}})}),e.jsxs(t,{className:"host-details",sx:{flex:1},children:[e.jsx(a,{className:"host-name",component:"h5",children:n.host?.name||"Host"}),e.jsx(a,{className:"host-joined",children:U?`${r("listing_detail.joined_in")} ${U}`:""}),e.jsx(p,{variant:"outlined",startIcon:e.jsx(ve,{}),onClick:()=>V.visit(`/chat?property_id=${n.id}`),sx:{mt:2,borderColor:"#AD542D",color:"#AD542D",textTransform:"none",fontWeight:600,borderRadius:2,px:3,"&:hover":{borderColor:"#78381C",bgcolor:"#FFF5F7"}},children:r("listing_detail.message")})]})]})]}),e.jsxs(o,{className:"about-section mt-4",elevation:0,children:[e.jsx(a,{className:"section-title",component:"h2",children:r("listing_detail.about_property")}),e.jsx(a,{className:"about-text",children:n.description||r("listing_detail.no_description")})]}),re&&e.jsxs(o,{className:"about-section mt-4",elevation:0,sx:{bgcolor:"#F9FAFB",border:"1px solid #E5E7EB"},children:[e.jsx(a,{className:"section-title",component:"h2",children:r("listing_detail.airport_pickup")}),e.jsxs(t,{sx:{mt:2},children:[e.jsx(ee,{control:e.jsx(se,{checked:w,onChange:s=>ie(s.target.checked),sx:{color:"#AD542D","&.Mui-checked":{color:"#AD542D"}}}),label:r("listing_detail.pickup_question"),sx:{mb:w?3:0}}),w&&e.jsx(t,{sx:{mt:2},children:e.jsxs(X,{spacing:3,children:[e.jsxs(t,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[e.jsx(Ce,{sx:{color:"#AD542D",fontSize:24,mt:.5}}),e.jsxs(t,{children:[e.jsx(a,{sx:{fontSize:"0.875rem",color:"#717171",mb:.5},children:"Airport"}),e.jsx(a,{sx:{fontWeight:600,color:"#222222"},children:n.airport||"—"})]})]}),e.jsxs(t,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[e.jsx(Me,{sx:{color:"#AD542D",fontSize:24,mt:.5}}),e.jsxs(t,{children:[e.jsx(a,{sx:{fontSize:"0.875rem",color:"#717171",mb:.5},children:"Pickup Time"}),e.jsx(a,{sx:{fontWeight:600,color:"#222222"},children:n.pickup_start_time&&n.pickup_end_time?`${n.pickup_start_time} - ${n.pickup_end_time}`:"—"})]})]}),e.jsxs(t,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[e.jsx(Z,{sx:{color:"#AD542D",fontSize:24,mt:.5}}),e.jsxs(t,{children:[e.jsx(a,{sx:{fontSize:"0.875rem",color:"#717171",mb:.5},children:"Price"}),e.jsx(a,{sx:{fontWeight:600,color:"#222222",fontSize:"1.125rem"},children:O(n.airport_pickup_price)})]})]})]})})]})]}),ce&&e.jsxs(o,{className:"about-section mt-4",elevation:0,sx:{bgcolor:"#F9FAFB",border:"1px solid #E5E7EB"},children:[e.jsx(a,{className:"section-title",component:"h2",children:r("listing_detail.guided_tours")}),e.jsxs(t,{sx:{mt:2},children:[e.jsx(ee,{control:e.jsx(se,{checked:C,onChange:s=>le(s.target.checked),sx:{color:"#AD542D","&.Mui-checked":{color:"#AD542D"}}}),label:r("listing_detail.guided_tours_question"),sx:{mb:C?3:0}}),C&&e.jsx(t,{sx:{mt:2},children:e.jsxs(X,{spacing:3,children:[n.guided_tours_description&&e.jsxs(t,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[e.jsx(Ie,{sx:{color:"#AD542D",fontSize:24,mt:.5}}),e.jsxs(t,{children:[e.jsx(a,{sx:{fontSize:"0.875rem",color:"#717171",mb:.5},children:"Tour Description"}),e.jsx(a,{sx:{fontWeight:400,color:"#222222",fontSize:"0.9rem"},children:n.guided_tours_description})]})]}),n.guided_tours_duration&&e.jsxs(t,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[e.jsx(ze,{sx:{color:"#AD542D",fontSize:24,mt:.5}}),e.jsxs(t,{children:[e.jsx(a,{sx:{fontSize:"0.875rem",color:"#717171",mb:.5},children:"Duration"}),e.jsx(a,{sx:{fontWeight:600,color:"#222222"},children:n.guided_tours_duration})]})]}),e.jsxs(t,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[e.jsx(Z,{sx:{color:"#AD542D",fontSize:24,mt:.5}}),e.jsxs(t,{children:[e.jsx(a,{sx:{fontSize:"0.875rem",color:"#717171",mb:.5},children:"Price"}),e.jsx(a,{sx:{fontWeight:600,color:"#222222",fontSize:"1.125rem"},children:O(n.guided_tours_price)})]})]})]})})]})]}),e.jsxs(o,{className:"rules-section mt-4",elevation:0,children:[e.jsx(a,{className:"section-title",component:"h2",children:"Roles"}),e.jsx(t,{className:"rules-list",children:["Check-in: 3:00 PM - 10:00 PM","Check-out: 11:00 AM","No parties or events allowed","Pets allowed [with prior notification]","No smoking indoors"].map((s,i)=>e.jsxs(t,{className:"rule-item",children:[e.jsx(_e,{sx:{color:"#28a745",fontSize:16}}),e.jsx(a,{component:"span",children:s})]},i))})]}),e.jsxs(o,{className:"availability-section mt-4",elevation:0,children:[e.jsx(a,{className:"section-title",component:"h2",children:"Availability"}),e.jsxs(h,{children:[e.jsx(c,{md:6,children:e.jsxs(o,{className:"calendar-widget",elevation:0,children:[e.jsxs(t,{className:"calendar-header",children:[e.jsx(p,{size:"small",onClick:()=>W(1),children:e.jsx(K,{})}),e.jsx(a,{component:"span",className:"month-year",children:G(j)}),e.jsx(p,{size:"small",onClick:()=>Y(1),children:e.jsx(Q,{})})]}),e.jsxs(t,{className:"calendar-grid",children:[e.jsx(t,{className:"calendar-weekdays",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(s=>e.jsx(t,{children:s},s))}),e.jsx(t,{className:"calendar-days",children:oe.slice(0,35).map((s,i)=>e.jsx(t,{className:`day ${s.isOtherMonth?"other-month":""} ${!s.isOtherMonth&&s.day===T?"selected start-range":""}`,onClick:()=>!s.isOtherMonth&&ae(s.day),children:s.day},i))})]})]})}),e.jsx(c,{md:6,children:e.jsxs(o,{className:"calendar-widget",elevation:0,children:[e.jsxs(t,{className:"calendar-header",children:[e.jsx(p,{size:"small",onClick:()=>W(2),children:e.jsx(K,{})}),e.jsx(a,{component:"span",className:"month-year",children:G(g)}),e.jsx(p,{size:"small",onClick:()=>Y(2),children:e.jsx(Q,{})})]}),e.jsxs(t,{className:"calendar-grid",children:[e.jsx(t,{className:"calendar-weekdays",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(s=>e.jsx(t,{children:s},s))}),e.jsx(t,{className:"calendar-days",children:me.slice(0,35).map((s,i)=>e.jsx(t,{className:`day ${s.isOtherMonth?"other-month":""} ${!s.isOtherMonth&&s.day===H?"selected single":""}`,onClick:()=>!s.isOtherMonth&&ne(s.day),children:s.day},i))})]})]})})]})]}),e.jsxs(t,{className:"reviews-section mt-4",children:[e.jsxs(h,{children:[e.jsxs(a,{className:"reviews-title",component:"h2",children:["Reviews (",m.total,")"]}),e.jsx(c,{lg:8,children:e.jsx(t,{className:"reviews-list",children:y.length>0?y.map(s=>e.jsxs(t,{className:"review-item",children:[e.jsxs(t,{className:"reviewer-info",children:[e.jsx(t,{className:"reviewer-avatar",children:e.jsx("img",{src:s.user?.profile_picture||"/images/popular-stay-1.svg",alt:s.user?.name||"Reviewer"})}),e.jsx(a,{className:"reviewer-name",children:s.user?.name}),e.jsx(a,{className:"review-date",children:s.created_at})]}),e.jsxs(t,{className:"review-content",children:[e.jsx(t,{className:"stars",children:[...Array(5)].map((i,l)=>e.jsx(A,{sx:{fontSize:14,color:l<s.rating?"#ffc107":"#e9ecef"}},l))}),e.jsx(a,{className:"review-text",children:s.comment}),e.jsx(a,{className:"helpful-text",children:"Was this review helpful to you?"})]})]},s.id)):e.jsx(a,{sx:{color:"#717171"},children:"No reviews yet."})})}),e.jsx(c,{lg:4,children:e.jsxs(o,{className:"rating-summary",elevation:0,children:[e.jsxs(t,{className:"average-rating",children:[e.jsx(a,{className:"rating-title",children:r("listing_detail.average_rating")}),e.jsxs(a,{className:"rating-score",children:[m.average,"/5"]}),e.jsx(t,{className:"stars",children:[...Array(5)].map((s,i)=>e.jsx(A,{sx:{fontSize:16,color:i<Math.round(m.average)?"#ffc107":"#e9ecef"}},i))}),e.jsxs(a,{className:"total-reviews",children:["(",m.total," ",r("listing_detail.reviews"),")"]})]}),e.jsx(t,{className:"rating-breakdown",children:[5,4,3,2,1].map(s=>{const i=m.breakdown[s]??0,l=m.total>0?i/m.total*100:0;return e.jsxs(t,{className:"rating-bar",children:[e.jsxs(a,{className:"rating-label",children:[s," star"]}),e.jsx(t,{className:"bar-container",children:e.jsx(t,{className:"bar-fill",sx:{width:`${l}%`}})}),e.jsx(a,{className:"rating-count",children:i})]},s)})})]})})]}),e.jsx(t,{className:"text-center mt-4",children:e.jsx(p,{className:"explore-more",variant:"contained",children:"Explore More"})})]})]})})})}),e.jsx("section",{className:"popular-stays-section",children:e.jsxs(f,{children:[e.jsx(a,{className:"section-title",component:"h2",children:r("listing_detail.popular_near")}),e.jsx(h,{className:"g-4",children:N.length>0?N.map(s=>e.jsx(c,{lg:4,md:6,children:e.jsx(ye,{image:s.image||F,title:s.title,location:s.location,price:typeof s.price=="number"?s.price:Number(s.price)||0,id:s.id})},s.id)):e.jsx(c,{lg:12,children:e.jsx(a,{sx:{color:"#717171"},children:"No related properties at the moment."})})})]})})]}),e.jsx(fe,{})]})}export{ts as default};
