import{b as N,u as W,r as j,a as x,j as e,H}from"./app-B_RmO_HU.js";import{N as U,F as k}from"./Footer-DVtIFgnz.js";import{T as G}from"./Toast-DThBtCgS.js";import{S as z}from"./Save-DrJkoyv3.js";import{P as L}from"./PhotoCamera-BaiSf4rY.js";import{u as J,B as l,T as i}from"./use-language-3LGvdBiG.js";import{C as K}from"./Container-k9eFsD7X.js";import{R as Q,C as V}from"./Row-B3ptccXC.js";import{P as v,S as g,B as C}from"./ArrowDropDown-DGzKek7n.js";import{A as X}from"./KeyboardArrowDown--GCg5Byw.js";import{T as d}from"./TextField-efstak88.js";/* empty css            */import"./Close-C_nLVBxE.js";import"./Snackbar-CpGNuLa5.js";import"./useFormControl-C2TJA0L6.js";function fe(){const{t:r}=J(),{props:D}=N(),a=D.user,{data:c,setData:A,patch:P,processing:E,errors:o}=W({name:a?.name||"",email:a?.email||"",phone:a?.phone||"",bio:a?.bio||""}),{data:b,setData:T,patch:R,processing:F,errors:t,reset:M}=W({current_password:"",new_password:"",new_password_confirmation:""}),[f,p]=j.useState({open:!1,message:"",severity:"success"}),[_,u]=j.useState(!1);j.useEffect(()=>{const s=D?.flash;s?.success&&(p({open:!0,message:s.success,severity:"success"}),u(!1),x.reload({only:["user"]})),s?.error&&(p({open:!0,message:s.error,severity:"error"}),u(!1))},[D?.flash]);const m=s=>{const{name:n,value:h}=s.target;A(n,h)},w=s=>{const{name:n,value:h}=s.target;T(n,h)},B=s=>{s.preventDefault(),P("/profile/update",{onSuccess:()=>{x.reload({only:["user"]})}})},I=s=>{s.preventDefault(),R("/profile/password",{onSuccess:()=>{M()}})},O=s=>{const n=s.target.files?.[0];if(!n)return;if(n.size>2*1024*1024){p({open:!0,message:r("profile_settings.file_size_error"),severity:"error"}),s.target.value="";return}if(!["image/jpeg","image/jpg","image/png","image/gif"].includes(n.type)){p({open:!0,message:r("profile_settings.file_type_error"),severity:"error"}),s.target.value="";return}u(!0);const y=new FormData;y.append("profile_picture",n),x.post("/profile/picture",y,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{x.reload({only:["user"]}),s.target.value=""},onError:S=>{u(!1);const q=S?.profile_picture?.[0]||S?.message||"Failed to upload profile picture.";p({open:!0,message:q,severity:"error"}),s.target.value=""}})};return e.jsxs(e.Fragment,{children:[e.jsx(H,{title:r("profile_settings.title")}),e.jsxs(l,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[e.jsx(U,{}),e.jsx(l,{className:"profile-settings-page",sx:{flex:1},children:e.jsxs(K,{children:[e.jsxs(l,{sx:{textAlign:"center",mb:6,mt:4},children:[e.jsx(i,{variant:"h2",sx:{fontSize:"2rem",fontWeight:800,color:"#111827",mb:2},children:r("profile_settings.title")}),e.jsx(i,{variant:"body1",sx:{color:"#6B7280",fontSize:"1rem",maxWidth:600,mx:"auto"},children:r("profile_settings.subtitle")})]}),e.jsx(Q,{className:"g-4 justify-content-center",children:e.jsxs(V,{xs:12,md:10,lg:8,xl:7,children:[e.jsxs(v,{elevation:0,sx:{p:4,border:"1px solid #E5E7EB",borderRadius:"16px",mb:3},children:[e.jsx(i,{variant:"h5",sx:{fontWeight:700,color:"#111827",mb:3},children:r("profile_settings.profile_picture")}),e.jsxs(g,{direction:"row",spacing:3,useFlexGap:!0,alignItems:"center",children:[e.jsx(X,{src:a?.profile_picture,sx:{width:100,height:100,bgcolor:"#AD542D",fontSize:"2.5rem",fontWeight:700},children:!a?.profile_picture&&(c.name||a?.name||"").split(" ").map(s=>s[0]).join("").toUpperCase().slice(0,2)}),e.jsxs(g,{spacing:2,sx:{flex:1},children:[e.jsxs(C,{variant:"outlined",startIcon:e.jsx(L,{}),component:"label",disabled:_,sx:{borderColor:"#D0D5DD",color:"#344054",textTransform:"none",borderRadius:"12px",alignSelf:"flex-start","&:hover":{borderColor:"#D0D5DD",bgcolor:"#F9FAFB"},"&:disabled":{borderColor:"#D1D5DB",color:"#9CA3AF",cursor:"not-allowed"}},children:[r(_?"profile_settings.saving":"profile_settings.upload_photo"),e.jsx("input",{type:"file",hidden:!0,accept:"image/jpeg,image/jpg,image/png,image/gif",onChange:O,disabled:_})]}),e.jsx(i,{variant:"body2",sx:{color:"#6B7280"},children:r("profile_settings.file_hint")})]})]})]}),e.jsxs(v,{elevation:0,sx:{p:4,border:"1px solid #E5E7EB",borderRadius:"16px",mb:3},children:[e.jsx(i,{variant:"h5",sx:{fontWeight:700,color:"#111827",mb:3},children:r("profile_settings.personal_info")}),e.jsx("form",{onSubmit:B,children:e.jsxs(g,{spacing:3,children:[e.jsxs(l,{children:[e.jsx(i,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:r("profile_settings.name")}),e.jsx(d,{name:"name",value:c.name,onChange:m,placeholder:r("profile_settings.name_placeholder"),fullWidth:!0,required:!0,size:"small",error:!!o.name,helperText:o.name,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:o.name?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:o.name?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:o.name?"#EF4444":"#AD542D"}}}})]}),e.jsxs(l,{children:[e.jsx(i,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:r("profile_settings.email_address")}),e.jsx(d,{name:"email",type:"email",value:c.email,onChange:m,placeholder:r("profile_settings.email_placeholder"),fullWidth:!0,required:!0,size:"small",error:!!o.email,helperText:o.email,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:o.email?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:o.email?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:o.email?"#EF4444":"#AD542D"}}}})]}),e.jsxs(l,{children:[e.jsx(i,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:r("profile_settings.phone_number")}),e.jsx(d,{name:"phone",value:c.phone,onChange:m,placeholder:r("profile_settings.phone_placeholder"),fullWidth:!0,size:"small",error:!!o.phone,helperText:o.phone,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:o.phone?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:o.phone?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:o.phone?"#EF4444":"#AD542D"}}}})]}),e.jsxs(l,{children:[e.jsx(i,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:r("profile_settings.bio")}),e.jsx(d,{name:"bio",value:c.bio,onChange:m,placeholder:r("profile_settings.bio_placeholder"),fullWidth:!0,multiline:!0,rows:4,error:!!o.bio,helperText:o.bio,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:o.bio?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:o.bio?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:o.bio?"#EF4444":"#AD542D"}}}})]}),e.jsx(C,{type:"submit",variant:"contained",startIcon:e.jsx(z,{}),disabled:E,sx:{bgcolor:"#AD542D",borderRadius:"999px",py:1.5,textTransform:"none",fontWeight:700,fontSize:"0.875rem",alignSelf:"flex-start","&:hover":{bgcolor:"#78381C"},"&:disabled":{bgcolor:"#D1D5DB",color:"#9CA3AF"}},children:r(E?"profile_settings.saving":"profile_settings.save_changes")})]})})]}),e.jsxs(v,{elevation:0,sx:{p:4,border:"1px solid #E5E7EB",borderRadius:"16px"},children:[e.jsx(i,{variant:"h5",sx:{fontWeight:700,color:"#111827",mb:3},children:r("profile_settings.change_password")}),e.jsx("form",{onSubmit:I,children:e.jsxs(g,{spacing:3,children:[e.jsxs(l,{children:[e.jsx(i,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:r("profile_settings.current_password")}),e.jsx(d,{name:"current_password",type:"password",value:b.current_password,onChange:w,placeholder:r("profile_settings.current_password_placeholder"),fullWidth:!0,required:!0,size:"small",error:!!t.current_password,helperText:t.current_password,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:t.current_password?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:t.current_password?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:t.current_password?"#EF4444":"#AD542D"}}}})]}),e.jsxs(l,{children:[e.jsx(i,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:r("profile_settings.new_password")}),e.jsx(d,{name:"new_password",type:"password",value:b.new_password,onChange:w,placeholder:r("profile_settings.new_password_placeholder"),fullWidth:!0,required:!0,size:"small",error:!!t.new_password,helperText:t.new_password,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:t.new_password?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:t.new_password?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:t.new_password?"#EF4444":"#AD542D"}}}})]}),e.jsxs(l,{children:[e.jsx(i,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:r("profile_settings.confirm_password")}),e.jsx(d,{name:"new_password_confirmation",type:"password",value:b.new_password_confirmation,onChange:w,placeholder:r("profile_settings.confirm_password_placeholder"),fullWidth:!0,required:!0,size:"small",error:!!t.new_password_confirmation,helperText:t.new_password_confirmation,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:t.new_password_confirmation?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:t.new_password_confirmation?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:t.new_password_confirmation?"#EF4444":"#AD542D"}}}})]}),e.jsx(C,{type:"submit",variant:"contained",startIcon:e.jsx(z,{}),disabled:F,sx:{bgcolor:"#AD542D",borderRadius:"999px",py:1.5,textTransform:"none",fontWeight:700,fontSize:"0.875rem",alignSelf:"flex-start","&:hover":{bgcolor:"#78381C"},"&:disabled":{bgcolor:"#D1D5DB",color:"#9CA3AF"}},children:r(F?"profile_settings.updating":"profile_settings.update_password")})]})})]})]})})]})}),e.jsx(k,{}),e.jsx(G,{open:f.open,onClose:()=>p({...f,open:!1}),message:f.message,severity:f.severity})]})]})}export{fe as default};
