import{j as e,b as P,r as b,H as E,a as D}from"./app-BG98yZsH.js";import{N as L,F as q}from"./Footer-ChO15v2I.js";import{T as A}from"./Toast-fxUwJgAZ.js";import{c as B,P as w,S as x,a as j,B as M}from"./ArrowDropDown-E0EBazOW.js";import{L as $,B as G}from"./BookingSummaryCard-6sYqyrhL.js";import{u as H,B as l,T as t}from"./use-language-B6mIZlp-.js";import{C as R}from"./Container-C4NMCT8v.js";import{R as O,C as z}from"./Row-BHyYBfoC.js";import{T as d,F as f,S as v}from"./TextField-Cmce5bio.js";import{I as U}from"./InputAdornment-BweBD7W0.js";/* empty css            */import"./KeyboardArrowDown-DmWJJfVK.js";import"./Close--4yLerG8.js";import"./Snackbar-Bi4Ay5mI.js";import"./LocationOn-B6MNUYKh.js";import"./Star-Rm71P5f_.js";import"./CheckCircle-DDiLwL1d.js";import"./useFormControl-jVel-GGt.js";const V=B(e.jsx("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"})),J="/images/popular-stay-1.svg";function ue(){const{t:r}=H(),{property:i,nights:k,checkin:h,checkout:u,costs:W,totalAmount:N,rules:T}=P().props,y=(s,n)=>{const c={};i?.id&&(c.property_id=String(i.id)),c.checkin=s,c.checkout=n;const p=`/booking?${new URLSearchParams(c).toString()}`;D.visit(p,{method:"get",preserveState:!0,only:["costs","totalAmount","nights","checkin","checkout"]})},[a,C]=b.useState({name:"",email:"",phone:"",phoneCode:"+31",guests:1,rooms:1,adults:1,children:0,paymentMethod:"ideal",cardNumber:"",expiryDate:"",csv:""});b.useEffect(()=>{i&&C(s=>({...s,rooms:Math.max(1,i.bedrooms||1),guests:Math.max(1,i.guests||1),adults:Math.max(1,i.guests?Math.min(i.guests,10):1),children:0}))},[i]);const[o,S]=b.useState({}),[g,_]=b.useState({open:!1,message:"",severity:"success"}),F=()=>{const s={};return a.name.trim()?a.name.trim().length<2&&(s.name=r("booking.err_name_min")):s.name=r("booking.err_name_required"),a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(s.email=r("booking.err_email_invalid")):s.email=r("booking.err_email_required"),a.phone.trim()?/^\d{7,15}$/.test(a.phone.replace(/[\s\-\(\)]/g,""))||(s.phone=r("booking.err_phone_invalid")):s.phone=r("booking.err_phone_required"),a.cardNumber.trim()?/^\d{13,19}$/.test(a.cardNumber.replace(/\s|-/g,""))||(s.cardNumber=r("booking.err_card_invalid")):s.cardNumber=r("booking.err_card_required"),a.expiryDate.trim()?/^(0[1-9]|1[0-2])\/\d{2,4}$/.test(a.expiryDate)||(s.expiryDate=r("booking.err_expiry_invalid")):s.expiryDate=r("booking.err_expiry_required"),a.csv.trim()?/^\d{3,4}$/.test(a.csv)||(s.csv=r("booking.err_csv_invalid")):s.csv=r("booking.err_csv_required"),S(s),Object.keys(s).length===0},m=(s,n)=>{C({...a,[s]:n}),o[s]&&S({...o,[s]:""})},I=s=>{if(s.preventDefault(),F()){_({open:!0,message:r("booking.toast_success"),severity:"success"});let n="/confirmation";if(i){const c=new URLSearchParams({property_id:String(i.id)});h&&c.set("checkin",h),u&&c.set("checkout",u),n=`/confirmation?${c.toString()}`}setTimeout(()=>D.visit(n),1e3)}else _({open:!0,message:r("booking.toast_fix_errors"),severity:"error"})};return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:r("booking.title")}),e.jsxs(l,{children:[e.jsx(L,{}),e.jsx(l,{className:"booking-page",children:e.jsxs(R,{className:"px-0",children:[e.jsx(l,{sx:{mb:2,mt:4},children:e.jsx(t,{variant:"h2",sx:{fontSize:"2.5rem",fontWeight:800,color:"#222222",mb:2},children:r("booking.title")})}),e.jsxs(O,{children:[e.jsx(z,{xs:12,md:7,lg:8,className:"px-0",children:e.jsxs(w,{elevation:0,className:"booking-form",children:[e.jsx(t,{className:"section-title",sx:{fontSize:"1.5rem",fontWeight:700,color:"#222222",mb:2},children:r("booking.guest_details")}),e.jsxs("form",{onSubmit:I,children:[i&&e.jsxs(x,{direction:"row",spacing:1.5,useFlexGap:!0,className:"field",sx:{mb:2},children:[e.jsxs(l,{sx:{flex:1},children:[e.jsx(t,{className:"label",children:r("home.checkin")}),e.jsx(d,{size:"small",fullWidth:!0,type:"date",value:h,onChange:s=>{const n=s.target.value;let c=u;if(new Date(n)>=new Date(u)){const p=new Date(n);p.setDate(p.getDate()+1),c=p.toISOString().slice(0,10)}y(n,c)},InputLabelProps:{shrink:!0},inputProps:{min:new Date().toISOString().slice(0,10)}})]}),e.jsxs(l,{sx:{flex:1},children:[e.jsx(t,{className:"label",children:r("home.checkout")}),e.jsx(d,{size:"small",fullWidth:!0,type:"date",value:u,onChange:s=>{const n=s.target.value;new Date(n)<=new Date(h)||y(h,n)},InputLabelProps:{shrink:!0},inputProps:{min:h}})]})]}),i&&e.jsx(t,{variant:"body2",sx:{color:"#6B7280",mb:2},children:k!==1?r("booking.nights_note_plural").replace(":count",String(k)):r("booking.nights_note").replace(":count",String(k))}),e.jsxs(l,{className:"field",children:[e.jsx(t,{className:"label",children:r("booking.name")}),e.jsx(d,{size:"small",fullWidth:!0,value:a.name,onChange:s=>m("name",s.target.value),required:!0,error:!!o.name,helperText:o.name})]}),e.jsxs(l,{className:"field",children:[e.jsx(t,{className:"label",children:r("booking.number_of_rooms")}),e.jsx(f,{fullWidth:!0,size:"small",children:e.jsx(v,{value:a.rooms,displayEmpty:!0,onChange:s=>m("rooms",Number(s.target.value)),children:[1,2,3,4,5,6,7,8,9,10].map(s=>e.jsxs(j,{value:s,children:[s," ",s>1?r("booking.rooms"):r("booking.room")]},s))})})]}),e.jsxs(x,{direction:"row",spacing:1.5,useFlexGap:!0,className:"field",children:[e.jsxs(l,{sx:{flex:1},children:[e.jsx(t,{className:"label",children:r("booking.adults")}),e.jsx(f,{fullWidth:!0,size:"small",children:e.jsx(v,{value:a.adults,displayEmpty:!0,onChange:s=>m("adults",Number(s.target.value)),children:[1,2,3,4,5,6,7,8,9,10].map(s=>e.jsxs(j,{value:s,children:[s," ",s>1?r("booking.adults"):r("booking.adult")]},s))})})]}),e.jsxs(l,{sx:{flex:1},children:[e.jsx(t,{className:"label",children:r("booking.children")}),e.jsx(f,{fullWidth:!0,size:"small",children:e.jsx(v,{value:a.children,displayEmpty:!0,onChange:s=>m("children",Number(s.target.value)),children:[0,1,2,3,4,5,6,7,8,9,10].map(s=>e.jsxs(j,{value:s,children:[s," ",r(s===1?"booking.child":"booking.children")]},s))})})]})]}),e.jsxs(l,{className:"field",children:[e.jsx(t,{className:"label",children:r("booking.email")}),e.jsx(d,{size:"small",placeholder:r("booking.email_placeholder"),fullWidth:!0,type:"email",value:a.email,onChange:s=>m("email",s.target.value),required:!0,error:!!o.email,helperText:o.email})]}),e.jsxs(l,{className:"field",children:[e.jsx(t,{className:"label",children:r("booking.phone_number")}),e.jsxs(x,{direction:"row",spacing:1.5,useFlexGap:!0,children:[e.jsx(f,{size:"small",sx:{minWidth:120},children:e.jsx(v,{value:a.phoneCode,onChange:s=>m("phoneCode",s.target.value),children:["+31","+44","+1","+92"].map(s=>e.jsx(j,{value:s,children:s},s))})}),e.jsx(d,{size:"small",fullWidth:!0,value:a.phone,onChange:s=>m("phone",s.target.value),error:!!o.phone,helperText:o.phone})]}),e.jsx(t,{className:"help",children:r("booking.phone_note")})]}),e.jsx(t,{className:"section-title",sx:{fontSize:"1.5rem",fontWeight:700,color:"#222222",mb:2,mt:1.5},children:r("booking.card_info")}),e.jsxs(l,{className:"field",children:[e.jsx(t,{className:"label",children:r("booking.card_number")}),e.jsx(d,{size:"small",fullWidth:!0,value:a.cardNumber,onChange:s=>m("cardNumber",s.target.value),InputProps:{startAdornment:e.jsx(U,{position:"start",children:e.jsx(V,{sx:{color:"#9CA3AF"}})})},error:!!o.cardNumber,helperText:o.cardNumber})]}),e.jsxs(x,{direction:"row",spacing:1.5,useFlexGap:!0,className:"field",children:[e.jsxs(l,{sx:{flex:1},children:[e.jsx(t,{className:"label",children:r("booking.expiry_date")}),e.jsx(d,{size:"small",fullWidth:!0,placeholder:r("booking.expiry_placeholder"),value:a.expiryDate,onChange:s=>m("expiryDate",s.target.value),error:!!o.expiryDate,helperText:o.expiryDate})]}),e.jsxs(l,{sx:{flex:1},children:[e.jsx(t,{className:"label",children:r("booking.csv")}),e.jsx(d,{size:"small",fullWidth:!0,placeholder:r("booking.csv_placeholder"),value:a.csv,onChange:s=>m("csv",s.target.value),error:!!o.csv,helperText:o.csv})]})]}),e.jsxs(w,{elevation:0,className:"booking-total",children:[e.jsx(t,{children:r("booking.total")}),e.jsxs(x,{direction:"row",spacing:2,useFlexGap:!0,alignItems:"center",children:[e.jsx(t,{className:"grand-total",children:N}),e.jsx(M,{type:"submit",variant:"contained",className:"request-btn",children:r("booking.book_btn")})]})]})]})]})}),e.jsxs(z,{xs:12,md:5,lg:4,children:[e.jsx($,{image:i?.image??J,title:i?.title??r("booking.select_property"),location:i?.location??"â€”",reviews:i?.reviews_count??0,rating:i?.rating??0}),e.jsx(G,{rules:T,costs:W,totalAmount:N})]})]})]})}),e.jsx(q,{}),e.jsx(A,{open:g.open,onClose:()=>_({...g,open:!1}),message:g.message,severity:g.severity})]})]})}export{ue as default};
