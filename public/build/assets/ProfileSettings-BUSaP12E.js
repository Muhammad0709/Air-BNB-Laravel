import{b as O,u as S,r as j,a as h,j as e,H as U}from"./app-BztPSXfc.js";import{N as G,F as q}from"./Footer-BZlGrAOc.js";import{T as H}from"./Toast-HPvXcd4_.js";import{S as y}from"./Save-DdvqJP46.js";import{P as J}from"./PhotoCamera-DFn0ZDZV.js";import{B as a,T as t}from"./Box-BNDCmtGm.js";import{C as k}from"./Container-OPsniF9m.js";import{R as Y,C as K}from"./Row-BAtm_SPs.js";import{P as v,S as x,B as C}from"./Stack-CckH4aNe.js";import{A as L}from"./KeyboardArrowDown-BwBTyLRo.js";import{T as l}from"./TextField-CcFsmalO.js";/* empty css            */import"./Close-B-15TmdB.js";import"./Snackbar-AQSM5Fc9.js";import"./useFormControl-CH9Vmhrk.js";function pe(){const{props:D}=O(),n=D.user,{data:p,setData:W,patch:z,processing:E,errors:r}=S({name:n?.name||"",email:n?.email||"",phone:n?.phone||"",bio:n?.bio||""}),{data:g,setData:A,patch:T,processing:F,errors:s,reset:M}=S({current_password:"",new_password:"",new_password_confirmation:""}),[c,d]=j.useState({open:!1,message:"",severity:"success"}),[b,u]=j.useState(!1);j.useEffect(()=>{const o=D?.flash;o?.success&&(d({open:!0,message:o.success,severity:"success"}),u(!1),h.reload({only:["user"]})),o?.error&&(d({open:!0,message:o.error,severity:"error"}),u(!1))},[D?.flash]);const m=o=>{const{name:i,value:f}=o.target;W(i,f)},w=o=>{const{name:i,value:f}=o.target;A(i,f)},B=o=>{o.preventDefault(),z("/profile/update",{onSuccess:()=>{h.reload({only:["user"]})}})},I=o=>{o.preventDefault(),T("/profile/password",{onSuccess:()=>{M()}})},R=o=>{const i=o.target.files?.[0];if(!i)return;if(i.size>2*1024*1024){d({open:!0,message:"File size must be less than 2MB.",severity:"error"}),o.target.value="";return}if(!["image/jpeg","image/jpg","image/png","image/gif"].includes(i.type)){d({open:!0,message:"Please upload a valid image file (JPG, PNG, or GIF).",severity:"error"}),o.target.value="";return}u(!0);const _=new FormData;_.append("profile_picture",i),h.post("/profile/picture",_,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{h.reload({only:["user"]}),o.target.value=""},onError:P=>{u(!1);const N=P?.profile_picture?.[0]||P?.message||"Failed to upload profile picture.";d({open:!0,message:N,severity:"error"}),o.target.value=""}})};return e.jsxs(e.Fragment,{children:[e.jsx(U,{title:"Profile Settings"}),e.jsxs(a,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[e.jsx(G,{}),e.jsx(a,{className:"profile-settings-page",sx:{flex:1},children:e.jsxs(k,{children:[e.jsxs(a,{sx:{textAlign:"center",mb:6,mt:4},children:[e.jsx(t,{variant:"h2",sx:{fontSize:"2rem",fontWeight:800,color:"#111827",mb:2},children:"Profile Settings"}),e.jsx(t,{variant:"body1",sx:{color:"#6B7280",fontSize:"1rem",maxWidth:600,mx:"auto"},children:"Manage your account settings and preferences"})]}),e.jsx(Y,{className:"g-4 justify-content-center",children:e.jsxs(K,{xs:12,md:10,lg:8,xl:7,children:[e.jsxs(v,{elevation:0,sx:{p:4,border:"1px solid #E5E7EB",borderRadius:"16px",mb:3},children:[e.jsx(t,{variant:"h5",sx:{fontWeight:700,color:"#111827",mb:3},children:"Profile Picture"}),e.jsxs(x,{direction:"row",spacing:3,alignItems:"center",children:[e.jsx(L,{src:n?.profile_picture,sx:{width:100,height:100,bgcolor:"#AD542D",fontSize:"2.5rem",fontWeight:700},children:!n?.profile_picture&&(p.name||n?.name||"").split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2)}),e.jsxs(x,{spacing:2,sx:{flex:1},children:[e.jsxs(C,{variant:"outlined",startIcon:e.jsx(J,{}),component:"label",disabled:b,sx:{borderColor:"#D0D5DD",color:"#344054",textTransform:"none",borderRadius:"12px",alignSelf:"flex-start","&:hover":{borderColor:"#D0D5DD",bgcolor:"#F9FAFB"},"&:disabled":{borderColor:"#D1D5DB",color:"#9CA3AF",cursor:"not-allowed"}},children:[b?"Uploading...":"Upload Photo",e.jsx("input",{type:"file",hidden:!0,accept:"image/jpeg,image/jpg,image/png,image/gif",onChange:R,disabled:b})]}),e.jsx(t,{variant:"body2",sx:{color:"#6B7280"},children:"JPG, PNG or GIF. Max size 2MB"})]})]})]}),e.jsxs(v,{elevation:0,sx:{p:4,border:"1px solid #E5E7EB",borderRadius:"16px",mb:3},children:[e.jsx(t,{variant:"h5",sx:{fontWeight:700,color:"#111827",mb:3},children:"Personal Information"}),e.jsx("form",{onSubmit:B,children:e.jsxs(x,{spacing:3,children:[e.jsxs(a,{children:[e.jsx(t,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:"Full Name"}),e.jsx(l,{name:"name",value:p.name,onChange:m,placeholder:"Your full name",fullWidth:!0,required:!0,size:"small",error:!!r.name,helperText:r.name,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:r.name?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:r.name?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:r.name?"#EF4444":"#AD542D"}}}})]}),e.jsxs(a,{children:[e.jsx(t,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:"Email Address"}),e.jsx(l,{name:"email",type:"email",value:p.email,onChange:m,placeholder:"your.email@example.com",fullWidth:!0,required:!0,size:"small",error:!!r.email,helperText:r.email,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:r.email?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:r.email?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:r.email?"#EF4444":"#AD542D"}}}})]}),e.jsxs(a,{children:[e.jsx(t,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:"Phone Number"}),e.jsx(l,{name:"phone",value:p.phone,onChange:m,placeholder:"+1 (555) 123-4567",fullWidth:!0,size:"small",error:!!r.phone,helperText:r.phone,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:r.phone?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:r.phone?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:r.phone?"#EF4444":"#AD542D"}}}})]}),e.jsxs(a,{children:[e.jsx(t,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:"Bio"}),e.jsx(l,{name:"bio",value:p.bio,onChange:m,placeholder:"Tell us about yourself...",fullWidth:!0,multiline:!0,rows:4,error:!!r.bio,helperText:r.bio,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:r.bio?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:r.bio?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:r.bio?"#EF4444":"#AD542D"}}}})]}),e.jsx(C,{type:"submit",variant:"contained",startIcon:e.jsx(y,{}),disabled:E,sx:{bgcolor:"#AD542D",borderRadius:"999px",py:1.5,textTransform:"none",fontWeight:700,fontSize:"0.875rem",alignSelf:"flex-start","&:hover":{bgcolor:"#78381C"},"&:disabled":{bgcolor:"#D1D5DB",color:"#9CA3AF"}},children:E?"Saving...":"Save Changes"})]})})]}),e.jsxs(v,{elevation:0,sx:{p:4,border:"1px solid #E5E7EB",borderRadius:"16px"},children:[e.jsx(t,{variant:"h5",sx:{fontWeight:700,color:"#111827",mb:3},children:"Change Password"}),e.jsx("form",{onSubmit:I,children:e.jsxs(x,{spacing:3,children:[e.jsxs(a,{children:[e.jsx(t,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:"Current Password"}),e.jsx(l,{name:"current_password",type:"password",value:g.current_password,onChange:w,placeholder:"Enter current password",fullWidth:!0,required:!0,size:"small",error:!!s.current_password,helperText:s.current_password,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:s.current_password?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:s.current_password?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:s.current_password?"#EF4444":"#AD542D"}}}})]}),e.jsxs(a,{children:[e.jsx(t,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:"New Password"}),e.jsx(l,{name:"new_password",type:"password",value:g.new_password,onChange:w,placeholder:"Enter new password",fullWidth:!0,required:!0,size:"small",error:!!s.new_password,helperText:s.new_password,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:s.new_password?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:s.new_password?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:s.new_password?"#EF4444":"#AD542D"}}}})]}),e.jsxs(a,{children:[e.jsx(t,{sx:{fontWeight:600,color:"#111827",mb:1,fontSize:"0.875rem"},children:"Confirm New Password"}),e.jsx(l,{name:"new_password_confirmation",type:"password",value:g.new_password_confirmation,onChange:w,placeholder:"Confirm new password",fullWidth:!0,required:!0,size:"small",error:!!s.new_password_confirmation,helperText:s.new_password_confirmation,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:s.new_password_confirmation?"#EF4444":"#D0D5DD"},"&:hover fieldset":{borderColor:s.new_password_confirmation?"#EF4444":"#D0D5DD"},"&.Mui-focused fieldset":{borderColor:s.new_password_confirmation?"#EF4444":"#AD542D"}}}})]}),e.jsx(C,{type:"submit",variant:"contained",startIcon:e.jsx(y,{}),disabled:F,sx:{bgcolor:"#AD542D",borderRadius:"999px",py:1.5,textTransform:"none",fontWeight:700,fontSize:"0.875rem",alignSelf:"flex-start","&:hover":{bgcolor:"#78381C"},"&:disabled":{bgcolor:"#D1D5DB",color:"#9CA3AF"}},children:F?"Updating...":"Update Password"})]})})]})]})})]})}),e.jsx(q,{}),e.jsx(H,{open:c.open,onClose:()=>d({...c,open:!1}),message:c.message,severity:c.severity})]})]})}export{pe as default};
