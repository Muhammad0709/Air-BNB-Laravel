import{b as G,r as l,j as e,H as M,a as p}from"./app-BZPU0TFF.js";import{A as N}from"./AdminLayout-DyAVliD9.js";import{T as U}from"./Toast-BftUK9XT.js";import{S as P}from"./Save-HDnBWh07.js";import{P as J}from"./PhotoCamera-DsNureeo.js";import{u as O,B as n,T as o}from"./use-language-CBvUMsfX.js";import{B as u,S as g}from"./ArrowDropDown-CdXTbv6H.js";import{C as j,a as v}from"./CardContent-B4p7dtsI.js";import{T as f}from"./TextField-BJkH4-kg.js";import{R as Q,C as B}from"./Row-Cvotj-uB.js";import{A as V}from"./Menu-CWbzmUzk.js";/* empty css            */import"./BookOnline-B3dxxSnO.js";import"./People-IFCHyTrU.js";import"./Hotel-TiQRpwwi.js";import"./Container-D7o5WA9F.js";import"./CheckCircle-Dj2hi7qe.js";import"./Close-Ddt_jW1T.js";import"./Snackbar-DK9sa1nS.js";function xe(){const{t}=O(),{url:w,props:a}=G(),i=a.user,y=a.configuration??{commission_rate:10},[_,h]=l.useState({open:!1,message:"",severity:"success"}),[d,F]=l.useState({name:i?.name??"",email:i?.email??"",profileImage:i?.profile_picture??null}),[c,S]=l.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[W,E]=l.useState({commission_rate:y.commission_rate});l.useEffect(()=>{i&&F({name:i.name??"",email:i.email??"",profileImage:i.profile_picture??null})},[i?.id,i?.name,i?.email,i?.profile_picture]),l.useEffect(()=>{a.flash?.success&&h({open:!0,message:a.flash.success,severity:"success"}),a.flash?.error&&h({open:!0,message:a.flash.error,severity:"error"})},[a.flash?.success,a.flash?.error]),l.useEffect(()=>{E({commission_rate:y.commission_rate})},[y.commission_rate]);const T=s=>{const{name:r,value:m}=s.target;F(D=>({...D,[r]:m}))},C=s=>{const{name:r,value:m}=s.target;S(D=>({...D,[r]:m}))},A=s=>{const r=s.target.files?.[0];if(!r)return;if(r.size>2*1024*1024){h({open:!0,message:t("admin.settings.image_size_error"),severity:"error"}),s.target.value="";return}const m=new FormData;m.append("profile_picture",r),p.post("/admin/settings/picture",m,{preserveScroll:!0}),s.target.value=""},K=s=>{s.preventDefault(),p.put("/admin/settings/profile",{name:d.name,email:d.email},{preserveScroll:!0})},q=s=>{s.preventDefault(),p.put("/admin/settings/password",{current_password:c.currentPassword,new_password:c.newPassword,new_password_confirmation:c.confirmPassword},{preserveScroll:!0,onSuccess:()=>S({currentPassword:"",newPassword:"",confirmPassword:""})})},z=s=>{s.preventDefault(),p.put("/admin/settings/configuration",{commission_rate:W.commission_rate},{preserveScroll:!0})},k=s=>(s||"").split(" ").map(r=>r[0]).join("").slice(0,2),R=d.profileImage||i?.profile_picture||null,L=[{id:"profile",labelKey:"admin.settings.profile",path:"/admin/settings/profile"},{id:"settings",labelKey:"admin.settings.settings_tab",path:"/admin/settings/configuration"}],b=w.includes("configuration")?"settings":"profile",H=[{id:"profile",labelKey:"admin.settings.profile",path:"/admin/settings/profile"},{id:"password",labelKey:"admin.settings.password",path:"/admin/settings/password"}],x=w.includes("profile")?"profile":w.includes("password")?"password":"profile",I=()=>t(b==="settings"?"admin.settings.configuration_settings":x==="profile"?"admin.settings.profile_settings":x==="password"?"admin.settings.password_settings":"admin.settings.title");return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:I()}),e.jsxs(N,{title:I(),children:[e.jsxs(n,{sx:{mb:4},children:[e.jsx(o,{variant:"h4",sx:{fontWeight:700,color:"#222222",mb:1},children:t("admin.settings.title")}),e.jsx(o,{variant:"body1",sx:{color:"#717171"},children:t("admin.settings.settings_subtitle")})]}),e.jsx(n,{sx:{display:"inline-flex",alignItems:"center",p:.5,borderRadius:3,bgcolor:"#F3F4F6",border:"1px solid #E5E7EB",mb:4},children:L.map(s=>{const r=b===s.id;return e.jsx(u,{onClick:()=>p.visit(s.path),sx:{textTransform:"none",fontWeight:600,fontSize:"0.9375rem",px:3,py:1.25,borderRadius:2.5,minWidth:120,bgcolor:r?"#AD542D":"transparent",color:r?"#fff":"#717171",boxShadow:r?"0 1px 2px rgba(0,0,0,0.05)":"none","&:hover":{bgcolor:r?"#78381C":"rgba(0,0,0,0.04)",color:r?"#fff":"#222222"}},children:t(s.labelKey)},s.id)})}),b==="settings"&&e.jsx(j,{elevation:0,sx:{border:"1px solid #E5E7EB",borderRadius:"20px",width:"100%",maxWidth:"800px"},children:e.jsxs(v,{sx:{p:4},children:[e.jsx(o,{variant:"h6",sx:{fontWeight:700,color:"#222222",mb:1},children:t("admin.settings.configuration_settings")}),e.jsx(o,{variant:"body2",sx:{color:"#717171",mb:4},children:t("admin.settings.configuration_subtitle")}),e.jsx("form",{onSubmit:z,children:e.jsxs(g,{spacing:3,children:[e.jsx(f,{label:t("admin.settings.commission_rate"),name:"commission_rate",type:"number",value:W.commission_rate,onChange:s=>E(r=>({...r,commission_rate:Number(s.target.value)||0})),fullWidth:!0,inputProps:{min:0,max:100,step:.5},helperText:t("admin.settings.commission_rate_hint")}),e.jsx(n,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(u,{type:"submit",variant:"contained",startIcon:e.jsx(P,{}),sx:{bgcolor:"#AD542D",textTransform:"none",borderRadius:2,fontWeight:700,px:4,py:1.5,"&:hover":{bgcolor:"#78381C"}},children:t("admin.common.save")})})]})})]})}),b==="profile"&&e.jsxs(Q,{children:[e.jsx(B,{xs:12,md:3,children:e.jsx(j,{elevation:0,sx:{border:"1px solid #E5E7EB",borderRadius:2,mb:3},children:e.jsx(v,{sx:{p:0},children:e.jsx(g,{spacing:0,children:H.map(s=>{const r=x===s.id;return e.jsx(u,{fullWidth:!0,onClick:()=>p.visit(s.path),sx:{justifyContent:"flex-start",px:3,py:2,textTransform:"none",color:r?"#AD542D":"#717171",fontWeight:r?700:500,bgcolor:r?"#FFF5F7":"transparent",borderRadius:0,borderLeft:r?"3px solid #AD542D":"3px solid transparent","&:hover":{bgcolor:r?"#FFF5F7":"#F9FAFB"}},children:t(s.labelKey)},s.id)})})})})}),e.jsxs(B,{xs:12,md:9,children:[x==="profile"&&e.jsx(j,{elevation:0,sx:{border:"1px solid #E5E7EB",borderRadius:"20px",width:"100%",maxWidth:"800px"},children:e.jsxs(v,{sx:{p:4},children:[e.jsx(o,{variant:"h6",sx:{fontWeight:700,color:"#222222",mb:1},children:t("admin.settings.profile")}),e.jsx(o,{variant:"body2",sx:{color:"#717171",mb:4},children:t("admin.settings.profile_subtitle")}),e.jsx("form",{onSubmit:K,children:e.jsxs(g,{spacing:4,children:[e.jsx(n,{children:e.jsxs(g,{direction:"row",spacing:3,useFlexGap:!0,alignItems:"center",children:[e.jsxs(n,{sx:{position:"relative"},children:[e.jsx(V,{src:R||void 0,sx:{width:100,height:100,bgcolor:"#AD542D",fontSize:"2rem",fontWeight:700},children:!R&&k(d.name)}),e.jsx(n,{sx:{position:"absolute",bottom:0,right:0,bgcolor:"#AD542D",borderRadius:"50%",p:.5,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(J,{sx:{fontSize:16,color:"#FFFFFF"}})}),e.jsx("input",{type:"file",accept:"image/*",onChange:A,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer"}})]}),e.jsxs(n,{children:[e.jsxs(u,{variant:"outlined",component:"label",sx:{borderColor:"#D0D5DD",color:"#344054",textTransform:"none",borderRadius:2,"&:hover":{borderColor:"#D0D5DD",bgcolor:"#F9FAFB"}},children:[t("admin.settings.upload_picture"),e.jsx("input",{type:"file",accept:"image/*",onChange:A,hidden:!0})]}),e.jsx(o,{variant:"body2",sx:{color:"#717171",mt:1},children:t("admin.settings.image_formats_note")})]})]})}),e.jsx(f,{label:t("admin.settings.name"),name:"name",value:d.name,onChange:T,fullWidth:!0,required:!0}),e.jsx(f,{label:t("admin.settings.email_address"),name:"email",type:"email",value:d.email,onChange:T,fullWidth:!0,required:!0}),e.jsx(n,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(u,{type:"submit",variant:"contained",startIcon:e.jsx(P,{}),sx:{bgcolor:"#AD542D",textTransform:"none",borderRadius:2,fontWeight:700,px:4,py:1.5,"&:hover":{bgcolor:"#78381C"}},children:t("admin.common.save")})})]})})]})}),x==="password"&&e.jsx(j,{elevation:0,sx:{border:"1px solid #E5E7EB",borderRadius:"20px",width:"100%",maxWidth:"800px"},children:e.jsxs(v,{sx:{p:4},children:[e.jsx(o,{variant:"h6",sx:{fontWeight:700,color:"#222222",mb:1},children:t("admin.settings.update_password")}),e.jsx(o,{variant:"body2",sx:{color:"#717171",mb:4},children:t("admin.settings.password_description")}),e.jsx("form",{onSubmit:q,children:e.jsxs(g,{spacing:3,children:[e.jsx(f,{label:t("admin.settings.current_password"),name:"currentPassword",type:"password",value:c.currentPassword,onChange:C,fullWidth:!0,required:!0}),e.jsx(f,{label:t("admin.settings.new_password"),name:"newPassword",type:"password",value:c.newPassword,onChange:C,fullWidth:!0,required:!0}),e.jsx(f,{label:t("admin.settings.confirm_password"),name:"confirmPassword",type:"password",value:c.confirmPassword,onChange:C,fullWidth:!0,required:!0}),e.jsx(n,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(u,{type:"submit",variant:"contained",startIcon:e.jsx(P,{}),sx:{bgcolor:"#AD542D",textTransform:"none",borderRadius:2,fontWeight:700,px:4,py:1.5,"&:hover":{bgcolor:"#78381C"}},children:t("admin.settings.save_password")})})]})})]})})]})]}),e.jsx(U,{open:_.open,onClose:()=>h(s=>({...s,open:!1})),message:_.message,severity:_.severity})]})]})}export{xe as default};
